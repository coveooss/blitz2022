import{J as ie,K as oe,C as ce,S as x,i as K,s as Q,e as k,t as g,k as E,c as I,a as w,g as $,d as h,n as S,b as D,L as j,f as T,H as _,M as te,h as P,N as fe,l as R,I as V,O as W,P as ue,j as U,m as A,o as G,x as z,u as B,v as H,w as _e,Q as me,r as he}from"../chunks/vendor-567e4553.js";import{c as F,e as pe,S as de,B as ve}from"../chunks/BlitzViz-ee133f69.js";const ge=({onOpen:a,onClose:t,onError:e,supportedMessages:n})=>{let i;function c(){setTimeout(()=>{console.log("Attempting to reconnect"),u()},5e3)}function u(){const l=new ie("ws://localhost:8765");l.onerror=o=>{e==null||e(o.message),console.error(o)},l.onopen=()=>{a==null||a()},l.onclose=()=>{t==null||t(),l.close(),c()},l.onmessage=({data:o})=>{const s=JSON.parse(o.toString());s.type.toLowerCase()in n?n[s.type.toLowerCase()](s):console.warn(`Type ${s.type} is not supported in ${Object.keys(n)}.`)},i=l}return u(),{getSocket:()=>i,send:l=>i.send(l)}},X=ce(!1);let q=F();const L=F();let O=[];const $e=ge({onOpen:()=>{O=[],X.set(!0),q=F(),L.push(q),$e.send(JSON.stringify({type:"VIEWER"}))},onClose:()=>{X.set(!1)},supportedMessages:{message:a=>{console.log("Message from server:",a.message)},tick:a=>{const t=pe(a.tick,oe(q).list.length+O.length);O.push(t),"playingTeamId"in t||(q.push(...O),O=[])}}});function se(a){let t,e,n,i,c,u,l=a[0].currentIndex+1+"",o,s,r,p,f=a[0].lastIndex+1+"",m,v,b,N,C,Y;return{c(){t=k("div"),e=k("button"),n=g("Previous"),i=E(),c=k("span"),u=g("Game "),o=g(l),s=E(),r=k("span"),p=g("/"),m=g(f),v=E(),b=k("button"),N=g("Next"),this.h()},l(y){t=I(y,"DIV",{});var d=w(t);e=I(d,"BUTTON",{class:!0});var Z=w(e);n=$(Z,"Previous"),Z.forEach(h),i=S(d),c=I(d,"SPAN",{});var J=w(c);u=$(J,"Game "),o=$(J,l),J.forEach(h),s=S(d),r=I(d,"SPAN",{});var M=w(r);p=$(M,"/"),m=$(M,f),M.forEach(h),v=S(d),b=I(d,"BUTTON",{class:!0});var ee=w(b);N=$(ee,"Next"),ee.forEach(h),d.forEach(h),this.h()},h(){D(e,"class","hidden svelte-1pz3jru"),j(e,"shown",a[0].hasPrevious),j(r,"shown",a[0].currentIndex!==a[0].lastIndex),D(b,"class","hidden svelte-1pz3jru"),j(b,"shown",a[0].hasNext)},m(y,d){T(y,t,d),_(t,e),_(e,n),_(t,i),_(t,c),_(c,u),_(c,o),_(t,s),_(t,r),_(r,p),_(r,m),_(t,v),_(t,b),_(b,N),C||(Y=[te(e,"click",L.previous),te(b,"click",L.next)],C=!0)},p(y,d){d&1&&j(e,"shown",y[0].hasPrevious),d&1&&l!==(l=y[0].currentIndex+1+"")&&P(o,l),d&1&&f!==(f=y[0].lastIndex+1+"")&&P(m,f),d&1&&j(r,"shown",y[0].currentIndex!==y[0].lastIndex),d&1&&j(b,"shown",y[0].hasNext)},d(y){y&&h(t),C=!1,fe(Y)}}}function be(a){let t,e=a[0].lastIndex>0&&se(a);return{c(){e&&e.c(),t=R()},l(n){e&&e.l(n),t=R()},m(n,i){e&&e.m(n,i),T(n,t,i)},p(n,[i]){n[0].lastIndex>0?e?e.p(n,i):(e=se(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:V,o:V,d(n){e&&e.d(n),n&&h(t)}}}function ke(a,t,e){let n;return W(a,L,i=>e(0,n=i)),[n]}class Ie extends x{constructor(t){super();K(this,t,ke,be,Q,{})}}function ne(a,t,e){const n=a.slice();return n[1]=t[e],n[3]=e,n}function le(a){let t,e,n,i,c,u=a[0].teams,l=[];for(let o=0;o<u.length;o+=1)l[o]=ae(ne(a,u,o));return{c(){t=k("div"),e=k("h3"),n=g("Debug stuff"),i=E(),c=k("ul");for(let o=0;o<l.length;o+=1)l[o].c()},l(o){t=I(o,"DIV",{});var s=w(t);e=I(s,"H3",{});var r=w(e);n=$(r,"Debug stuff"),r.forEach(h),i=S(s),c=I(s,"UL",{});var p=w(c);for(let f=0;f<l.length;f+=1)l[f].l(p);p.forEach(h),s.forEach(h)},m(o,s){T(o,t,s),_(t,e),_(e,n),_(t,i),_(t,c);for(let r=0;r<l.length;r+=1)l[r].m(c,null)},p(o,s){if(s&1){u=o[0].teams;let r;for(r=0;r<u.length;r+=1){const p=ne(o,u,r);l[r]?l[r].p(p,s):(l[r]=ae(p),l[r].c(),l[r].m(c,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=u.length}},d(o){o&&h(t),ue(l,o)}}}function ae(a){let t,e=a[1].name+"",n,i,c=a[1].errors.join(" ")+"",u,l;return{c(){t=k("li"),n=g(e),i=g(": "),u=g(c),this.h()},l(o){t=I(o,"LI",{class:!0});var s=w(t);n=$(s,e),i=$(s,": "),u=$(s,c),s.forEach(h),this.h()},h(){D(t,"class",l="player-"+(a[3]+1)+" svelte-1472gh")},m(o,s){T(o,t,s),_(t,n),_(t,i),_(t,u)},p(o,s){s&1&&e!==(e=o[1].name+"")&&P(n,e),s&1&&c!==(c=o[1].errors.join(" ")+"")&&P(u,c)},d(o){o&&h(t)}}}function we(a){let t,e=a[0]&&le(a);return{c(){e&&e.c(),t=R()},l(n){e&&e.l(n),t=R()},m(n,i){e&&e.m(n,i),T(n,t,i)},p(n,[i]){n[0]?e?e.p(n,i):(e=le(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:V,o:V,d(n){e&&e.d(n),n&&h(t)}}}function ye(a,t,e){let{tick:n}=t;return a.$$set=i=>{"tick"in i&&e(0,n=i.tick)},[n]}class Te extends x{constructor(t){super();K(this,t,ye,we,Q,{tick:0})}}function re(a){let t,e,n,i,c,u,l,o;return t=new de({}),n=new Ie({}),c=new ve({props:{ticksStore:a[1]}}),l=new Te({props:{tick:a[0]}}),{c(){U(t.$$.fragment),e=E(),U(n.$$.fragment),i=E(),U(c.$$.fragment),u=E(),U(l.$$.fragment)},l(s){A(t.$$.fragment,s),e=S(s),A(n.$$.fragment,s),i=S(s),A(c.$$.fragment,s),u=S(s),A(l.$$.fragment,s)},m(s,r){G(t,s,r),T(s,e,r),G(n,s,r),T(s,i,r),G(c,s,r),T(s,u,r),G(l,s,r),o=!0},p(s,r){const p={};r&2&&(p.ticksStore=s[1]),c.$set(p);const f={};r&1&&(f.tick=s[0]),l.$set(f)},i(s){o||(z(t.$$.fragment,s),z(n.$$.fragment,s),z(c.$$.fragment,s),z(l.$$.fragment,s),o=!0)},o(s){B(t.$$.fragment,s),B(n.$$.fragment,s),B(c.$$.fragment,s),B(l.$$.fragment,s),o=!1},d(s){H(t,s),s&&h(e),H(n,s),s&&h(i),H(c,s),s&&h(u),H(l,s)}}}function Ne(a){let t,e,n,i,c,u=(a[2]?"Connected":"Disconnected")+"",l,o,s,r,p,f=a[1]&&re(a);return{c(){t=k("div"),e=k("h1"),n=g("Blitz 2022 Local UI "),i=k("span"),c=g("("),l=g(u),o=g(")"),s=E(),r=k("div"),f&&f.c(),this.h()},l(m){t=I(m,"DIV",{class:!0});var v=w(t);e=I(v,"H1",{});var b=w(e);n=$(b,"Blitz 2022 Local UI "),i=I(b,"SPAN",{class:!0});var N=w(i);c=$(N,"("),l=$(N,u),o=$(N,")"),N.forEach(h),b.forEach(h),s=S(v),r=I(v,"DIV",{class:!0});var C=w(r);f&&f.l(C),C.forEach(h),v.forEach(h),this.h()},h(){D(i,"class","connexion-info svelte-1pcr2aq"),D(r,"class","game"),D(t,"class","container svelte-1pcr2aq")},m(m,v){T(m,t,v),_(t,e),_(e,n),_(e,i),_(i,c),_(i,l),_(i,o),_(t,s),_(t,r),f&&f.m(r,null),p=!0},p(m,[v]){(!p||v&4)&&u!==(u=(m[2]?"Connected":"Disconnected")+"")&&P(l,u),m[1]?f?(f.p(m,v),v&2&&z(f,1)):(f=re(m),f.c(),z(f,1),f.m(r,null)):f&&(he(),B(f,1,1,()=>{f=null}),_e())},i(m){p||(z(f),p=!0)},o(m){B(f),p=!1},d(m){m&&h(t),f&&f.d()}}}function Ee(a,t,e){let n,i,c,u,l,o=V,s=()=>(o(),o=me(n,m=>e(6,l=m)),n),r,p;W(a,L,m=>e(7,r=m)),W(a,X,m=>e(2,p=m)),a.$$.on_destroy.push(()=>o());const f=!1;return a.$$.update=()=>{a.$$.dirty&128&&s(e(1,n=r.current)),a.$$.dirty&64&&e(5,i=l==null?void 0:l.list),a.$$.dirty&64&&e(4,c=l==null?void 0:l.currentIndex),a.$$.dirty&48&&e(0,u=i==null?void 0:i[c])},[u,n,p,f,c,i,l,r]}class Ce extends x{constructor(t){super();K(this,t,Ee,Ne,Q,{ssr:3})}get ssr(){return this.$$.ctx[3]}}export{Ce as default};
