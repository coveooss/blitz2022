var Kl=Object.defineProperty,Ql=Object.defineProperties;var xl=Object.getOwnPropertyDescriptors;var tt=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var Et=(i,e,n)=>e in i?Kl(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,Re=(i,e)=>{for(var n in e||(e={}))bt.call(e,n)&&Et(i,n,e[n]);if(tt)for(var n of tt(e))wt.call(e,n)&&Et(i,n,e[n]);return i},Ye=(i,e)=>Ql(i,xl(e));var yt=(i,e)=>{var n={};for(var t in i)bt.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&tt)for(var t of tt(i))e.indexOf(t)<0&&wt.call(i,t)&&(n[t]=i[t]);return n};import{C as It,R as en,S as ve,i as ge,s as ke,e as b,T as tn,c as w,d as h,b as c,H as d,I as se,t as T,k as G,j as x,a as v,g as L,n as H,m as le,f as V,o as ee,M as Se,h as _e,p as ln,q as nn,r as ae,u as E,v as te,w as fe,x as k,U as sn,V as $t,W as pt,X as rn,B as on,Y as St,Z as Dt,_ as Z,$ as J,a0 as Le,E as lt,F as nt,G as it,l as K,N as Je,D as st,a1 as an,Q as vt,z as Pt,a2 as Me,L as Ae,a3 as Fe,a4 as Ze,a5 as Ke,P as De,a6 as fn,a7 as un,a8 as cn,a9 as dn,aa as Vt,A as gt,ab as Tt,ac as hn}from"./vendor-567e4553.js";function mn(i=[]){const e=It(i),n=It(i.length>0?0:-1),{subscribe:t}=en([e,n],([l,s])=>{const r=l.length-1;return{current:s!==-1?l[s]:null,currentIndex:s,lastIndex:r,hasNext:s!==r,hasPrevious:s>0,list:l}});return{subscribe:t,push:(...l)=>{e.update(s=>(n.update(r=>r===s.length-1?r+l.length:r),[...s,...l]))},next:()=>e.update(l=>(n.update(s=>s===l.length-1?s:s+1),l)),previous:()=>n.update(l=>Math.max(l-1,0)),jump:l=>n.set(l)}}const _n=(i,e)=>{const n=i.teams.map((r,s)=>{var a=r,{units:t}=a,l=yt(a,["units"]);return Ye(Re({},l),{units:t.map((o,f)=>Ye(Re({},o),{team:l,teamIndex:s,unitIndex:f}))})});return Ye(Re({},i),{index:e,teams:n,diamondsPerId:i.map.diamonds.reduce((t,l)=>Ye(Re({},t),{[l.id]:l}),{}),allUnitsPerId:n.flatMap(t=>t.units).reduce((t,l)=>Ye(Re({},t),{[l.id]:l}),{})})};function pn(i){let e,n,t;return{c(){e=b("link"),n=b("link"),t=b("link"),this.h()},l(l){const s=tn('[data-svelte="svelte-bi2sl4"]',document.head);e=w(s,"LINK",{rel:!0,href:!0}),n=w(s,"LINK",{rel:!0,href:!0,crossorigin:!0}),t=w(s,"LINK",{href:!0,rel:!0}),s.forEach(h),this.h()},h(){c(e,"rel","preconnect"),c(e,"href","https://fonts.googleapis.com"),c(n,"rel","preconnect"),c(n,"href","https://fonts.gstatic.com"),c(n,"crossorigin",""),c(t,"href","https://fonts.googleapis.com/css2?family=Arima+Madurai:wght@100;200;300;400;500;700;800;900&family=Cinzel+Decorative:wght@400;700;900&display=swap"),c(t,"rel","stylesheet")},m(l,s){d(document.head,e),d(document.head,n),d(document.head,t)},p:se,i:se,o:se,d(l){h(e),h(n),h(t)}}}class vn extends ve{constructor(e){super();ge(this,e,null,pn,ke,{})}}function Lt(i,e,n){const t=i.slice();return t[7]=e[n].component,t[8]=e[n].componentProps,t[9]=e[n].tick,t[10]=e[n].index,t[11]=e[n].key,t}function Nt(i,e){let n,t,l=(e[0]?e[10]:e[9])+"",s,r,a,o,f,u,m,_,g;const p=[e[8]];var S=e[7];function N(P){let A={};for(let M=0;M<p.length;M+=1)A=on(A,p[M]);return{props:A}}S&&(o=new S(N()));function U(){return e[5](e[10])}return{key:i,first:null,c(){n=b("div"),t=b("span"),s=T(l),r=T(" -"),a=G(),o&&x(o.$$.fragment),f=G(),this.h()},l(P){n=w(P,"DIV",{class:!0});var A=v(n);t=w(A,"SPAN",{class:!0});var M=v(t);s=L(M,l),r=L(M," -"),M.forEach(h),a=H(A),o&&le(o.$$.fragment,A),f=H(A),A.forEach(h),this.h()},h(){c(t,"class","text-golden title"),c(n,"class","bubble svelte-fnf2dj"),this.first=n},m(P,A){V(P,n,A),d(n,t),d(t,s),d(t,r),d(n,a),o&&ee(o,n,null),d(n,f),m=!0,_||(g=Se(n,"click",U),_=!0)},p(P,A){e=P,(!m||A&3)&&l!==(l=(e[0]?e[10]:e[9])+"")&&_e(s,l);const M=A&2?ln(p,[nn(e[8])]):{};if(S!==(S=e[7])){if(o){ae();const I=o;E(I.$$.fragment,1,0,()=>{te(I,1)}),fe()}S?(o=new S(N()),x(o.$$.fragment),k(o.$$.fragment,1),ee(o,n,f)):o=null}else S&&o.$set(M)},i(P){m||(o&&k(o.$$.fragment,P),sn(()=>{u||(u=$t(n,St,{},!0)),u.run(1)}),m=!0)},o(P){o&&E(o.$$.fragment,P),u||(u=$t(n,St,{},!1)),u.run(0),m=!1},d(P){P&&h(n),o&&te(o),P&&u&&u.end(),_=!1,g()}}}function gn(i){let e,n,t=[],l=new Map,s,r=i[1];const a=o=>o[11];for(let o=0;o<r.length;o+=1){let f=Lt(i,r,o),u=a(f);l.set(u,t[o]=Nt(u,f))}return{c(){e=b("section"),n=b("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=w(o,"SECTION",{});var f=v(e);n=w(f,"DIV",{class:!0});var u=v(n);for(let m=0;m<t.length;m+=1)t[m].l(u);u.forEach(h),f.forEach(h),this.h()},h(){c(n,"class","board svelte-fnf2dj")},m(o,f){V(o,e,f),d(e,n);for(let u=0;u<t.length;u+=1)t[u].m(n,null);s=!0},p(o,[f]){f&7&&(r=o[1],ae(),t=pt(t,f,a,1,o,r,l,n,Dt,Nt,null,Lt),fe())},i(o){if(!s){for(let f=0;f<r.length;f+=1)k(t[f]);s=!0}},o(o){for(let f=0;f<t.length;f+=1)E(t[f]);s=!1},d(o){o&&h(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function kn(i,e,n){let t,{ticks:l}=e,{showIndividualTurns:s=!0}=e,{logs:r}=e;const a=rn();function o(u){a("select",{tick:l[u],index:u})}const f=u=>o(u-1);return i.$$set=u=>{"ticks"in u&&n(3,l=u.ticks),"showIndividualTurns"in u&&n(0,s=u.showIndividualTurns),"logs"in u&&n(4,r=u.logs)},i.$$.update=()=>{i.$$.dirty&16&&n(1,t=r.slice(-5))},[s,t,o,l,r,f]}class bn extends ve{constructor(e){super();ge(this,e,kn,gn,ke,{ticks:3,showIndividualTurns:0,logs:4})}}function wn(i){let e,n;return{c(){e=Z("svg"),n=Z("path"),this.h()},l(t){e=J(t,"svg",{xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0});var l=v(e);n=J(l,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){c(n,"fill","currentColor"),c(n,"fill-rule","evenodd"),c(n,"d","M3.121 16.09l11.452-6.737a.867.867 0 0 0 0-1.494L3.12 1.122a.867.867 0 0 0-1.306.747v13.473a.867.867 0 0 0 1.306.747zm11.959-5.875c1.227-.722 1.227-2.496 0-3.218L3.628.26C2.384-.471.815.426.815 1.869v13.473c0 1.444 1.569 2.341 2.813 1.609l11.452-6.736z"),c(n,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","currentColor"),c(e,"width","100%"),c(e,"height","100%"),c(e,"viewBox","0 0 16 18")},m(t,l){V(t,e,l),d(e,n)},p:se,i:se,o:se,d(t){t&&h(e)}}}class En extends ve{constructor(e){super();ge(this,e,null,wn,ke,{})}}function yn(i){let e,n;return{c(){e=Z("svg"),n=Z("path"),this.h()},l(t){e=J(t,"svg",{width:!0,height:!0,xmlns:!0,fill:!0,"fill-rule":!0,"clip-rule":!0,viewBox:!0});var l=v(e);n=J(l,"path",{d:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){c(n,"d","M10 24h-6v-24h6v24zm10 0h-6v-24h6v24zm-11-23h-4v22h4v-22zm10 0h-4v22h4v-22z"),c(e,"width","100%"),c(e,"height","100%"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","currentColor"),c(e,"fill-rule","evenodd"),c(e,"clip-rule","evenodd"),c(e,"viewBox","0 0 24 24")},m(t,l){V(t,e,l),d(e,n)},p:se,i:se,o:se,d(t){t&&h(e)}}}class In extends ve{constructor(e){super();ge(this,e,null,yn,ke,{})}}function $n(i){let e,n,t,l,s,r,a,o,f,u;return{c(){e=b("label"),n=b("span"),t=T(i[1]),l=G(),s=b("div"),r=b("input"),a=G(),o=b("span"),this.h()},l(m){e=w(m,"LABEL",{for:!0,class:!0});var _=v(e);n=w(_,"SPAN",{class:!0});var g=v(n);t=L(g,i[1]),g.forEach(h),l=H(_),s=w(_,"DIV",{class:!0});var p=v(s);r=w(p,"INPUT",{type:!0,id:!0,class:!0}),a=H(p),o=w(p,"SPAN",{class:!0}),v(o).forEach(h),p.forEach(h),_.forEach(h),this.h()},h(){c(n,"class","text-golden"),c(r,"type","checkbox"),c(r,"id","toggle"),c(r,"class","svelte-1qaig64"),c(o,"class","slider round svelte-1qaig64"),c(s,"class","switch svelte-1qaig64"),c(e,"for","toggle"),c(e,"class","svelte-1qaig64")},m(m,_){V(m,e,_),d(e,n),d(n,t),d(e,l),d(e,s),d(s,r),r.checked=i[0],d(s,a),d(s,o),f||(u=Se(r,"change",i[2]),f=!0)},p(m,[_]){_&2&&_e(t,m[1]),_&1&&(r.checked=m[0])},i:se,o:se,d(m){m&&h(e),f=!1,u()}}}function Sn(i,e,n){let{title:t}=e,{checked:l}=e;function s(){l=this.checked,n(0,l)}return i.$$set=r=>{"title"in r&&n(1,t=r.title),"checked"in r&&n(0,l=r.checked)},[l,t,s]}class Dn extends ve{constructor(e){super();ge(this,e,Sn,$n,ke,{title:1,checked:0})}}function Ut(i){let e,n;const t=i[7].default,l=st(t,i,i[6],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0});var r=v(e);l&&l.l(r),r.forEach(h),this.h()},h(){c(e,"class","hover svelte-1g0q8e2"),Le(e,"width",i[0]+"px"),Le(e,"left",i[1].x+"px"),Le(e,"top",i[1].y+"px")},m(s,r){V(s,e,r),l&&l.m(e,null),n=!0},p(s,r){l&&l.p&&(!n||r&64)&&lt(l,t,s,s[6],n?it(t,s[6],r,null):nt(s[6]),null),(!n||r&1)&&Le(e,"width",s[0]+"px"),(!n||r&2)&&Le(e,"left",s[1].x+"px"),(!n||r&2)&&Le(e,"top",s[1].y+"px")},i(s){n||(k(l,s),n=!0)},o(s){E(l,s),n=!1},d(s){s&&h(e),l&&l.d(s)}}}function Pn(i){let e,n,t,l,s=i[1].x>=0&&i[1].y>=0&&Ut(i);return{c(){s&&s.c(),e=K()},l(r){s&&s.l(r),e=K()},m(r,a){s&&s.m(r,a),V(r,e,a),n=!0,t||(l=[Se(window,"mouseout",i[2]),Se(window,"blur",i[2]),Se(window,"mousemove",i[3])],t=!0)},p(r,[a]){r[1].x>=0&&r[1].y>=0?s?(s.p(r,a),a&2&&k(s,1)):(s=Ut(r),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(ae(),E(s,1,1,()=>{s=null}),fe())},i(r){n||(k(s),n=!0)},o(r){E(s),n=!1},d(r){s&&s.d(r),r&&h(e),t=!1,Je(l)}}}function Vn(i,e,n){let{$$slots:t={},$$scope:l}=e,{paddingX:s=50}=e,{paddingY:r=20}=e,{width:a=200}=e,o={x:-1,y:-1};function f(){n(1,o.x=-1,o),n(1,o.y=-1,o)}function u(m){n(1,o.x=m.clientX+s-a/2,o),n(1,o.y=m.clientY+r,o)}return i.$$set=m=>{"paddingX"in m&&n(4,s=m.paddingX),"paddingY"in m&&n(5,r=m.paddingY),"width"in m&&n(0,a=m.width),"$$scope"in m&&n(6,l=m.$$scope)},[a,o,f,u,s,r,l,t]}class Tn extends ve{constructor(e){super();ge(this,e,Vn,Pn,ke,{paddingX:4,paddingY:5,width:0})}}function At(i){let e,n,t,l,s,r,a;return l=new Tn({props:{paddingX:0,paddingY:-40,$$slots:{default:[Ln]},$$scope:{ctx:i}}}),{c(){e=b("div"),n=b("progress"),t=G(),x(l.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var f=v(e);n=w(f,"PROGRESS",{max:!0,class:!0}),v(n).forEach(h),t=H(f),le(l.$$.fragment,f),f.forEach(h),this.h()},h(){n.value=i[6],c(n,"max",i[5]),c(n,"class","progress svelte-eo1qok"),c(e,"class","progress-container svelte-eo1qok")},m(o,f){V(o,e,f),d(e,n),i[13](n),d(e,t),ee(l,e,null),s=!0,r||(a=[Se(n,"click",i[7]),Se(n,"mousedown",i[14]),Se(n,"mouseup",i[15]),Se(n,"mousemove",an(i[8],100)),Se(n,"mouseout",i[9]),Se(n,"blur",i[9])],r=!0)},p(o,f){(!s||f&64)&&(n.value=o[6]),(!s||f&32)&&c(n,"max",o[5]);const u={};f&262184&&(u.$$scope={dirty:f,ctx:o}),l.$set(u)},i(o){s||(k(l.$$.fragment,o),s=!0)},o(o){E(l.$$.fragment,o),s=!1},d(o){o&&h(e),i[13](null),te(l),r=!1,Je(a)}}}function Ct(i){let e,n=Math.min(i[3]+1,i[5])+"",t;return{c(){e=b("div"),t=T(n),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=v(e);t=L(s,n),s.forEach(h),this.h()},h(){c(e,"class","hovered-progress svelte-eo1qok")},m(l,s){V(l,e,s),d(e,t)},p(l,s){s&40&&n!==(n=Math.min(l[3]+1,l[5])+"")&&_e(t,n)},d(l){l&&h(e)}}}function Ln(i){let e,n=i[3]!==null&&Ct(i);return{c(){n&&n.c(),e=K()},l(t){n&&n.l(t),e=K()},m(t,l){n&&n.m(t,l),V(t,e,l)},p(t,l){t[3]!==null?n?n.p(t,l):(n=Ct(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&h(e)}}}function Nn(i){let e,n,t=i[1].currentIndex>=0&&At(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[1].currentIndex>=0?t?(t.p(l,s),s&2&&k(t,1)):(t=At(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Un(i,e,n){let t,l,s,r,a=se,o=()=>(a(),a=vt(p,D=>n(1,r=D)),p);i.$$.on_destroy.push(()=>a());var f;let u,m=null,_=!1,g=0,{ticks:p}=e;o();let{showIndividualTurns:S=!0}=e;Pt(()=>{m!==null&&U()});function N(D){g=D.pageX-u.getBoundingClientRect().x;const R=Math.round(g*s/u.offsetWidth);S?p.jump(R):p.jump(t[R].index)}function U(){n(3,m=Math.round(g*u.max/u.offsetWidth))}function P(D){g=D.pageX-u.getBoundingClientRect().x,U(),_&&N(D)}function A(D){n(3,m=null),n(4,_=!1)}function M(D){Me[D?"unshift":"push"](()=>{u=D,n(2,u)})}const I=()=>n(4,_=!0),O=()=>n(4,_=!1);return i.$$set=D=>{"ticks"in D&&o(n(0,p=D.ticks)),"showIndividualTurns"in D&&n(10,S=D.showIndividualTurns)},i.$$.update=()=>{i.$$.dirty&2050&&n(12,t=(n(11,f=r.list)===null||f===void 0?void 0:f.filter(D=>!("playingTeamId"in D)))||[]),i.$$.dirty&1026&&n(6,l=S?r.currentIndex+1:r.current.tick+1),i.$$.dirty&5122&&n(5,s=S?r.lastIndex+1:t.length)},[p,r,u,m,_,s,l,N,P,A,S,f,t,M,I,O]}class An extends ve{constructor(e){super();ge(this,e,Un,Nn,ke,{ticks:0,showIndividualTurns:10})}}function Bt(i){let e,n,t,l,s,r,a,o,f,u,m,_,g,p,S,N,U,P,A,M,I,O,D,R=Math.round(1/i[4]*1e3)+"",q,ne,C,$,y,j,X,W,z,ie,Y;n=new An({props:{ticks:i[1],showIndividualTurns:i[0]}});const ue=[Bn,Cn],me=[];function ce(Q,de){return Q[7]?0:1}_=ce(i),g=me[_]=ue[_](i);function B(Q){i[16](Q)}let F={title:"Show individual player turns"};i[0]!==void 0&&(F.checked=i[0]),y=new Dn({props:F}),Me.push(()=>Ze(y,"checked",B));function Ee(Q,de){return Q[0]?Mn:On}let oe=Ee(i),pe=oe(i);return{c(){e=b("div"),x(n.$$.fragment),t=G(),l=b("div"),s=b("div"),r=b("button"),a=T("\u2190"),f=G(),u=b("button"),m=b("div"),g.c(),S=G(),N=b("button"),U=T("\u2192"),A=G(),M=b("div"),I=b("span"),O=T("SPEED:"),D=G(),q=T(R),ne=T(" per sec"),C=G(),$=b("div"),x(y.$$.fragment),X=G(),W=b("div"),pe.c(),this.h()},l(Q){e=w(Q,"DIV",{class:!0});var de=v(e);le(n.$$.fragment,de),de.forEach(h),t=H(Q),l=w(Q,"DIV",{class:!0});var be=v(l);s=w(be,"DIV",{class:!0});var we=v(s);r=w(we,"BUTTON",{class:!0});var $e=v(r);a=L($e,"\u2190"),$e.forEach(h),f=H(we),u=w(we,"BUTTON",{class:!0});var Ue=v(u);m=w(Ue,"DIV",{class:!0});var Ie=v(m);g.l(Ie),Ie.forEach(h),Ue.forEach(h),S=H(we),N=w(we,"BUTTON",{class:!0});var Te=v(N);U=L(Te,"\u2192"),Te.forEach(h),we.forEach(h),A=H(be),M=w(be,"DIV",{});var ye=v(M);I=w(ye,"SPAN",{class:!0});var Pe=v(I);O=L(Pe,"SPEED:"),Pe.forEach(h),D=H(ye),q=L(ye,R),ne=L(ye," per sec"),ye.forEach(h),C=H(be),$=w(be,"DIV",{});var Ne=v($);le(y.$$.fragment,Ne),Ne.forEach(h),X=H(be),W=w(be,"DIV",{});var Be=v(W);pe.l(Be),Be.forEach(h),be.forEach(h),this.h()},h(){c(e,"class","rows svelte-1ugzvxi"),c(r,"class","control svelte-1ugzvxi"),r.disabled=o=!i[3],Ae(r,"disabled",!i[3]),c(m,"class","icon svelte-1ugzvxi"),c(u,"class","control svelte-1ugzvxi"),u.disabled=p=i[6].currentIndex===i[6].lastIndex,c(N,"class","control svelte-1ugzvxi"),N.disabled=P=!i[2],Ae(N,"disabled",!i[2]),c(s,"class","buttons svelte-1ugzvxi"),c(I,"class","text-golden title"),c(l,"class","video-controls rows svelte-1ugzvxi")},m(Q,de){V(Q,e,de),ee(n,e,null),V(Q,t,de),V(Q,l,de),d(l,s),d(s,r),d(r,a),d(s,f),d(s,u),d(u,m),me[_].m(m,null),d(s,S),d(s,N),d(N,U),d(l,A),d(l,M),d(M,I),d(I,O),d(M,D),d(M,q),d(M,ne),d(l,C),d(l,$),ee(y,$,null),d(l,X),d(l,W),pe.m(W,null),z=!0,ie||(Y=[Se(r,"click",i[14]),Se(u,"click",i[5]),Se(N,"click",i[15])],ie=!0)},p(Q,de){const be={};de&2&&(be.ticks=Q[1]),de&1&&(be.showIndividualTurns=Q[0]),n.$set(be),(!z||de&8&&o!==(o=!Q[3]))&&(r.disabled=o),de&8&&Ae(r,"disabled",!Q[3]);let we=_;_=ce(Q),_!==we&&(ae(),E(me[we],1,1,()=>{me[we]=null}),fe(),g=me[_],g||(g=me[_]=ue[_](Q),g.c()),k(g,1),g.m(m,null)),(!z||de&64&&p!==(p=Q[6].currentIndex===Q[6].lastIndex))&&(u.disabled=p),(!z||de&4&&P!==(P=!Q[2]))&&(N.disabled=P),de&4&&Ae(N,"disabled",!Q[2]),(!z||de&16)&&R!==(R=Math.round(1/Q[4]*1e3)+"")&&_e(q,R);const $e={};!j&&de&1&&(j=!0,$e.checked=Q[0],Fe(()=>j=!1)),y.$set($e),oe===(oe=Ee(Q))&&pe?pe.p(Q,de):(pe.d(1),pe=oe(Q),pe&&(pe.c(),pe.m(W,null)))},i(Q){z||(k(n.$$.fragment,Q),k(g),k(y.$$.fragment,Q),z=!0)},o(Q){E(n.$$.fragment,Q),E(g),E(y.$$.fragment,Q),z=!1},d(Q){Q&&h(e),te(n),Q&&h(t),Q&&h(l),me[_].d(),te(y),pe.d(),ie=!1,Je(Y)}}}function Cn(i){let e,n;return e=new En({}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function Bn(i){let e,n;return e=new In({}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function On(i){let e,n,t=i[6].current.tick+1+"",l,s,r,a,o=i[8].length+"",f;return{c(){e=b("span"),n=T("#"),l=T(t),s=G(),r=b("span"),a=T("/ "),f=T(o)},l(u){e=w(u,"SPAN",{});var m=v(e);n=L(m,"#"),l=L(m,t),s=H(m),r=w(m,"SPAN",{});var _=v(r);a=L(_,"/ "),f=L(_,o),_.forEach(h),m.forEach(h)},m(u,m){V(u,e,m),d(e,n),d(e,l),d(e,s),d(e,r),d(r,a),d(r,f)},p(u,m){m&64&&t!==(t=u[6].current.tick+1+"")&&_e(l,t),m&256&&o!==(o=u[8].length+"")&&_e(f,o)},d(u){u&&h(e)}}}function Mn(i){let e,n,t=i[6].currentIndex+1+"",l,s,r,a,o=i[6].lastIndex+1+"",f;return{c(){e=b("span"),n=T("#"),l=T(t),s=G(),r=b("span"),a=T("/ "),f=T(o)},l(u){e=w(u,"SPAN",{});var m=v(e);n=L(m,"#"),l=L(m,t),s=H(m),r=w(m,"SPAN",{});var _=v(r);a=L(_,"/ "),f=L(_,o),_.forEach(h),m.forEach(h)},m(u,m){V(u,e,m),d(e,n),d(e,l),d(e,s),d(e,r),d(r,a),d(r,f)},p(u,m){m&64&&t!==(t=u[6].currentIndex+1+"")&&_e(l,t),m&64&&o!==(o=u[6].lastIndex+1+"")&&_e(f,o)},d(u){u&&h(e)}}}function jn(i){let e,n,t=i[6].currentIndex>=0&&Bt(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[6].currentIndex>=0?t?(t.p(l,s),s&64&&k(t,1)):(t=Bt(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Gn(i,e,n){let t,l,s=se,r=()=>(s(),s=vt(o,q=>n(6,l=q)),o);i.$$.on_destroy.push(()=>s());var a;let{ticks:o}=e;r();let{nextLogTickNumber:f=null}=e,{lastLogTickNumber:u=null}=e,{speed:m=100}=e,{showIndividualTurns:_=!0}=e;function g(){p!==null?S():(l.hasNext&&N(),P())}let p=null;function S(){clearTimeout(p),n(7,p=null)}function N(){if(_)o.next();else for(o.next();l.hasNext&&"playingTeamId"in l.current;)o.next()}function U(){if(_)o.previous();else for(o.previous();l.hasPrevious&&"playingTeamId"in l.current;)o.previous()}function P(){n(7,p=setTimeout(()=>{l.hasNext&&N(),l.currentIndex<l.lastIndex?P():S()},m))}function A(q,ne=!0){ne&&S(),o.jump(q)}function M(){S(),N()}function I(){S(),U()}const O=()=>A(u-1,!1),D=()=>A(f-1,!1);function R(q){_=q,n(0,_)}return i.$$set=q=>{"ticks"in q&&r(n(1,o=q.ticks)),"nextLogTickNumber"in q&&n(2,f=q.nextLogTickNumber),"lastLogTickNumber"in q&&n(3,u=q.lastLogTickNumber),"speed"in q&&n(4,m=q.speed),"showIndividualTurns"in q&&n(0,_=q.showIndividualTurns)},i.$$.update=()=>{i.$$.dirty&8256&&n(8,t=(n(13,a=l.list)===null||a===void 0?void 0:a.filter(q=>!("playingTeamId"in q)))||[])},[_,o,f,u,m,g,l,p,t,A,S,M,I,a,O,D,R]}class Hn extends ve{constructor(e){super();ge(this,e,Gn,jn,ke,{ticks:1,nextLogTickNumber:2,lastLogTickNumber:3,speed:4,showIndividualTurns:0,playOrStop:5,stop:10,next:11,previous:12})}get playOrStop(){return this.$$.ctx[5]}get stop(){return this.$$.ctx[10]}get next(){return this.$$.ctx[11]}get previous(){return this.$$.ctx[12]}}function zn(i){let e,n,t;return{c(){e=b("span"),n=b("span"),t=T(i[0]),this.h()},l(l){e=w(l,"SPAN",{class:!0});var s=v(e);n=w(s,"SPAN",{class:!0});var r=v(n);t=L(r,i[0]),r.forEach(h),s.forEach(h),this.h()},h(){c(n,"class","key-position-adjustements svelte-exgkxw"),c(e,"class","key text-golden svelte-exgkxw")},m(l,s){V(l,e,s),d(e,n),d(n,t)},p(l,[s]){s&1&&_e(t,l[0])},i:se,o:se,d(l){l&&h(e)}}}function qn(i,e,n){let{key:t}=e;return i.$$set=l=>{"key"in l&&n(0,t=l.key)},[t]}class Ve extends ve{constructor(e){super();ge(this,e,qn,zn,ke,{key:0})}}function Xn(i){let e,n;return{c(){e=b("h2"),n=T(i[0]),this.h()},l(t){e=w(t,"H2",{class:!0});var l=v(e);n=L(l,i[0]),l.forEach(h),this.h()},h(){c(e,"class","text-golden title svelte-1jkfjfj"),Ae(e,"center",i[1])},m(t,l){V(t,e,l),d(e,n)},p(t,[l]){l&1&&_e(n,t[0]),l&2&&Ae(e,"center",t[1])},i:se,o:se,d(t){t&&h(e)}}}function Wn(i,e,n){let{title:t}=e,{center:l=!1}=e;return i.$$set=s=>{"title"in s&&n(0,t=s.title),"center"in s&&n(1,l=s.center)},[t,l]}class Qe extends ve{constructor(e){super();ge(this,e,Wn,Xn,ke,{title:0,center:1})}}function Rn(i){let e,n,t,l,s,r,a,o,f,u,m,_,g,p,S,N,U;return n=new Qe({props:{title:"OPTIONS"}}),r=new Ve({props:{key:"H"}}),u=new Ve({props:{key:"D"}}),p=new Ve({props:{key:"G"}}),{c(){e=b("section"),x(n.$$.fragment),t=G(),l=b("div"),s=T("Show Hotkey menu "),x(r.$$.fragment),a=G(),o=b("div"),f=T("Show Diamonds & Points "),x(u.$$.fragment),m=G(),_=b("div"),g=T("Show coordinates "),x(p.$$.fragment),this.h()},l(P){e=w(P,"SECTION",{class:!0});var A=v(e);le(n.$$.fragment,A),t=H(A),l=w(A,"DIV",{class:!0});var M=v(l);s=L(M,"Show Hotkey menu "),le(r.$$.fragment,M),M.forEach(h),a=H(A),o=w(A,"DIV",{class:!0});var I=v(o);f=L(I,"Show Diamonds & Points "),le(u.$$.fragment,I),I.forEach(h),m=H(A),_=w(A,"DIV",{class:!0});var O=v(_);g=L(O,"Show coordinates "),le(p.$$.fragment,O),O.forEach(h),A.forEach(h),this.h()},h(){c(l,"class","clickable svelte-m1alra"),c(o,"class","clickable svelte-m1alra"),c(_,"class","clickable svelte-m1alra"),c(e,"class","svelte-m1alra")},m(P,A){V(P,e,A),ee(n,e,null),d(e,t),d(e,l),d(l,s),ee(r,l,null),d(e,a),d(e,o),d(o,f),ee(u,o,null),d(e,m),d(e,_),d(_,g),ee(p,_,null),S=!0,N||(U=[Se(l,"click",function(){Ke(i[0])&&i[0].apply(this,arguments)}),Se(o,"click",function(){Ke(i[2])&&i[2].apply(this,arguments)}),Se(_,"click",function(){Ke(i[1])&&i[1].apply(this,arguments)})],N=!0)},p(P,[A]){i=P},i(P){S||(k(n.$$.fragment,P),k(r.$$.fragment,P),k(u.$$.fragment,P),k(p.$$.fragment,P),S=!0)},o(P){E(n.$$.fragment,P),E(r.$$.fragment,P),E(u.$$.fragment,P),E(p.$$.fragment,P),S=!1},d(P){P&&h(e),te(n),te(r),te(u),te(p),N=!1,Je(U)}}}function Yn(i,e,n){let{toggleHotkeys:t}=e,{toggleCoordinates:l}=e,{toggleDiamondAndPoints:s}=e;return i.$$set=r=>{"toggleHotkeys"in r&&n(0,t=r.toggleHotkeys),"toggleCoordinates"in r&&n(1,l=r.toggleCoordinates),"toggleDiamondAndPoints"in r&&n(2,s=r.toggleDiamondAndPoints)},[t,l,s]}class Fn extends ve{constructor(e){super();ge(this,e,Yn,Rn,ke,{toggleHotkeys:0,toggleCoordinates:1,toggleDiamondAndPoints:2})}}const He=["Crocodile","Eagle","Jaguar","Snake"],xe=[5,10,50,100],et=i=>i<xe[0]?1:i<xe[1]?2:i<xe[2]?3:i<xe[3]?4:5;function Ot(i){let e,n=He[i[2]%He.length]+"",t;return{c(){e=T("'s "),t=T(n)},l(l){e=L(l,"'s "),t=L(l,n)},m(l,s){V(l,e,s),V(l,t,s)},p(l,s){s&4&&n!==(n=He[l[2]%He.length]+"")&&_e(t,n)},d(l){l&&h(e),l&&h(t)}}}function Zn(i){let e,n,t,l,s=i[2]!==void 0&&Ot(i);return{c(){e=b("span"),n=T(i[1]),t=G(),s&&s.c(),this.h()},l(r){e=w(r,"SPAN",{class:!0});var a=v(e);n=L(a,i[1]),t=H(a),s&&s.l(a),a.forEach(h),this.h()},h(){c(e,"class",l="text-player-"+(i[0]+1)+" border-player-"+(i[0]+1)+" svelte-17wj5s1")},m(r,a){V(r,e,a),d(e,n),d(e,t),s&&s.m(e,null)},p(r,[a]){a&2&&_e(n,r[1]),r[2]!==void 0?s?s.p(r,a):(s=Ot(r),s.c(),s.m(e,null)):s&&(s.d(1),s=null),a&1&&l!==(l="text-player-"+(r[0]+1)+" border-player-"+(r[0]+1)+" svelte-17wj5s1")&&c(e,"class",l)},i:se,o:se,d(r){r&&h(e),s&&s.d()}}}function Jn(i,e,n){let{index:t}=e,{name:l}=e,{unitIndex:s=void 0}=e;return i.$$set=r=>{"index"in r&&n(0,t=r.index),"name"in r&&n(1,l=r.name),"unitIndex"in r&&n(2,s=r.unitIndex)},[t,l,s]}class Mt extends ve{constructor(e){super();ge(this,e,Jn,Zn,ke,{index:0,name:1,unitIndex:2})}}function jt(i,e,n){const t=i.slice();return t[1]=e[n],t[3]=n,t}function Gt(i){let e,n,t,l;n=new Qe({props:{title:"Stats"}});let s=i[0].teams,r=[];for(let o=0;o<s.length;o+=1)r[o]=zt(jt(i,s,o));const a=o=>E(r[o],1,1,()=>{r[o]=null});return{c(){e=b("section"),x(n.$$.fragment),t=G();for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=w(o,"SECTION",{class:!0});var f=v(e);le(n.$$.fragment,f),t=H(f);for(let u=0;u<r.length;u+=1)r[u].l(f);f.forEach(h),this.h()},h(){c(e,"class","svelte-a1vm11")},m(o,f){V(o,e,f),ee(n,e,null),d(e,t);for(let u=0;u<r.length;u+=1)r[u].m(e,null);l=!0},p(o,f){if(f&1){s=o[0].teams;let u;for(u=0;u<s.length;u+=1){const m=jt(o,s,u);r[u]?(r[u].p(m,f),k(r[u],1)):(r[u]=zt(m),r[u].c(),k(r[u],1),r[u].m(e,null))}for(ae(),u=s.length;u<r.length;u+=1)a(u);fe()}},i(o){if(!l){k(n.$$.fragment,o);for(let f=0;f<s.length;f+=1)k(r[f]);l=!0}},o(o){E(n.$$.fragment,o),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)E(r[f]);l=!1},d(o){o&&h(e),te(n),De(r,o)}}}function Ht(i){let e,n,t,l,s,r,a,o=i[1].stats.summonCount+"",f,u,m=i[1].stats.attackCount+"",_,g,p=i[1].stats.dropCount+"",S,N,U=i[1].stats.vineCount+"",P,A,M;return t=new Mt({props:{index:i[3],name:i[1].name}}),{c(){e=b("div"),n=b("div"),x(t.$$.fragment),l=G(),s=b("span"),r=b("span"),a=T("S: "),f=T(o),u=T(" A: "),_=T(m),g=T(" D: "),S=T(p),N=T(" V: "),P=T(U),A=G(),this.h()},l(I){e=w(I,"DIV",{class:!0});var O=v(e);n=w(O,"DIV",{class:!0});var D=v(n);le(t.$$.fragment,D),D.forEach(h),l=H(O),s=w(O,"SPAN",{class:!0});var R=v(s);r=w(R,"SPAN",{});var q=v(r);a=L(q,"S: "),f=L(q,o),u=L(q," A: "),_=L(q,m),g=L(q," D: "),S=L(q,p),N=L(q," V: "),P=L(q,U),q.forEach(h),R.forEach(h),A=H(O),O.forEach(h),this.h()},h(){c(n,"class","team svelte-a1vm11"),c(s,"class","stats-details svelte-a1vm11"),c(e,"class","stats svelte-a1vm11")},m(I,O){V(I,e,O),d(e,n),ee(t,n,null),d(e,l),d(e,s),d(s,r),d(r,a),d(r,f),d(r,u),d(r,_),d(r,g),d(r,S),d(r,N),d(r,P),d(e,A),M=!0},p(I,O){const D={};O&1&&(D.name=I[1].name),t.$set(D),(!M||O&1)&&o!==(o=I[1].stats.summonCount+"")&&_e(f,o),(!M||O&1)&&m!==(m=I[1].stats.attackCount+"")&&_e(_,m),(!M||O&1)&&p!==(p=I[1].stats.dropCount+"")&&_e(S,p),(!M||O&1)&&U!==(U=I[1].stats.vineCount+"")&&_e(P,U)},i(I){M||(k(t.$$.fragment,I),M=!0)},o(I){E(t.$$.fragment,I),M=!1},d(I){I&&h(e),te(t)}}}function zt(i){let e,n,t=i[1].stats&&Ht(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,s){l[1].stats?t?(t.p(l,s),s&1&&k(t,1)):(t=Ht(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Kn(i){let e,n,t=i[0]&&Gt(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=Gt(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Qn(i,e,n){let{tick:t}=e;return i.$$set=l=>{"tick"in l&&n(0,t=l.tick)},[t]}class xn extends ve{constructor(e){super();ge(this,e,Qn,Kn,ke,{tick:0})}}function ei(i){let e,n;const t=i[1].default,l=st(t,i,i[0],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=v(e);l&&l.l(r),r.forEach(h),this.h()},h(){c(e,"class","overlay svelte-zux01u")},m(s,r){V(s,e,r),l&&l.m(e,null),n=!0},p(s,[r]){l&&l.p&&(!n||r&1)&&lt(l,t,s,s[0],n?it(t,s[0],r,null):nt(s[0]),null)},i(s){n||(k(l,s),n=!0)},o(s){E(l,s),n=!1},d(s){s&&h(e),l&&l.d(s)}}}function ti(i,e,n){let{$$slots:t={},$$scope:l}=e;return i.$$set=s=>{"$$scope"in s&&n(0,l=s.$$scope)},[l,t]}class li extends ve{constructor(e){super();ge(this,e,ti,ei,ke,{})}}function qt(i,e,n){const t=i.slice();return t[4]=e[n],t[6]=n,t}function Xt(i){let e,n,t,l=[],s=new Map,r;n=new Qe({props:{title:"Scoreboard"}});let a=i[1];const o=f=>f[4].id;for(let f=0;f<a.length;f+=1){let u=qt(i,a,f),m=o(u);s.set(m,l[f]=Wt(m,u))}return{c(){e=b("section"),x(n.$$.fragment),t=G();for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){e=w(f,"SECTION",{class:!0});var u=v(e);le(n.$$.fragment,u),t=H(u);for(let m=0;m<l.length;m+=1)l[m].l(u);u.forEach(h),this.h()},h(){c(e,"class","svelte-b92nc9")},m(f,u){V(f,e,u),ee(n,e,null),d(e,t);for(let m=0;m<l.length;m+=1)l[m].m(e,null);r=!0},p(f,u){if(u&14){a=f[1],ae();for(let m=0;m<l.length;m+=1)l[m].r();l=pt(l,u,o,1,f,a,s,e,cn,Wt,null,qt);for(let m=0;m<l.length;m+=1)l[m].a();fe()}},i(f){if(!r){k(n.$$.fragment,f);for(let u=0;u<a.length;u+=1)k(l[u]);r=!0}},o(f){E(n.$$.fragment,f);for(let u=0;u<l.length;u+=1)E(l[u]);r=!1},d(f){f&&h(e),te(n);for(let u=0;u<l.length;u+=1)l[u].d()}}}function Wt(i,e){var A,M;let n,t,l,s,r,a=e[4].score+"",o,f,u,m,_=((M=(A=e[3])==null?void 0:A[e[2][e[6]]])!=null?M:0)+"",g,p,S,N,U=se,P;return l=new Mt({props:{index:e[2][e[6]],name:""+((e[4].isDead?"(\u{1FAA6}) ":"")+e[4].name)}}),{key:i,first:null,c(){n=b("div"),t=b("div"),x(l.$$.fragment),s=G(),r=b("span"),o=T(a),f=G(),u=b("span"),m=T("("),g=T(_),p=T(" pending)"),S=G(),this.h()},l(I){n=w(I,"DIV",{class:!0});var O=v(n);t=w(O,"DIV",{class:!0});var D=v(t);le(l.$$.fragment,D),D.forEach(h),s=H(O),r=w(O,"SPAN",{class:!0});var R=v(r);o=L(R,a),f=H(R),u=w(R,"SPAN",{});var q=v(u);m=L(q,"("),g=L(q,_),p=L(q," pending)"),q.forEach(h),R.forEach(h),S=H(O),O.forEach(h),this.h()},h(){c(t,"class","team svelte-b92nc9"),c(r,"class","score svelte-b92nc9"),c(n,"class","team-score svelte-b92nc9"),this.first=n},m(I,O){V(I,n,O),d(n,t),ee(l,t,null),d(n,s),d(n,r),d(r,o),d(r,f),d(r,u),d(u,m),d(u,g),d(u,p),d(n,S),P=!0},p(I,O){var R,q;e=I;const D={};O&6&&(D.index=e[2][e[6]]),O&2&&(D.name=""+((e[4].isDead?"(\u{1FAA6}) ":"")+e[4].name)),l.$set(D),(!P||O&2)&&a!==(a=e[4].score+"")&&_e(o,a),(!P||O&14)&&_!==(_=((q=(R=e[3])==null?void 0:R[e[2][e[6]]])!=null?q:0)+"")&&_e(g,_)},r(){N=n.getBoundingClientRect()},f(){fn(n),U()},a(){U(),U=un(n,N,dn,{duration:33})},i(I){P||(k(l.$$.fragment,I),P=!0)},o(I){E(l.$$.fragment,I),P=!1},d(I){I&&h(n),te(l)}}}function ni(i){let e,n,t=i[0]&&Xt(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=Xt(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function ii(i,e,n){let t,l,s,{tick:r}=e;return i.$$set=a=>{"tick"in a&&n(0,r=a.tick)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=(r==null?void 0:r.map.diamonds.filter(a=>a.ownerId).reduce((a,o)=>{const f=r.teams.findIndex(u=>u.units.some(m=>m.diamondId===o.id));return a[f]+=o.points,a},[0,0,0,0]))||[]),i.$$.dirty&1&&n(1,l=[...(r==null?void 0:r.teams)||[]].sort((a,o)=>o.score>a.score?1:o.score<a.score?-1:0)),i.$$.dirty&3&&n(2,s=l.map(a=>((r==null?void 0:r.teams)||[]).findIndex(o=>o.id===a.id)))},[r,l,s,t]}class si extends ve{constructor(e){super();ge(this,e,ii,ni,ke,{tick:0})}}function Rt(i){let e,n,t=i[1]!==void 0&&i[2]!==void 0&&Yt(i);return{c(){e=b("div"),t&&t.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=v(e);t&&t.l(s),s.forEach(h),this.h()},h(){c(e,"class",n="unit animal-"+(i[0].teamIndex+1)+(i[0].isSummoning?"-summon":"")+" animal-"+(i[0].teamIndex+1)+"-"+(i[0].unitIndex+1)+(i[0].isSummoning?"-summon":"")+" svelte-ptf5uu"),Ae(e,"summons",i[0].isSummoning)},m(l,s){V(l,e,s),t&&t.m(e,null)},p(l,s){l[1]!==void 0&&l[2]!==void 0?t?t.p(l,s):(t=Yt(l),t.c(),t.m(e,null)):t&&(t.d(1),t=null),s&1&&n!==(n="unit animal-"+(l[0].teamIndex+1)+(l[0].isSummoning?"-summon":"")+" animal-"+(l[0].teamIndex+1)+"-"+(l[0].unitIndex+1)+(l[0].isSummoning?"-summon":"")+" svelte-ptf5uu")&&c(e,"class",n),s&1&&Ae(e,"summons",l[0].isSummoning)},d(l){l&&h(e),t&&t.d()}}}function Yt(i){let e,n;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){c(e,"class",n="diamond diamond-"+i[2]+"-"+et(i[1])+" svelte-ptf5uu")},m(t,l){V(t,e,l)},p(t,l){l&6&&n!==(n="diamond diamond-"+t[2]+"-"+et(t[1])+" svelte-ptf5uu")&&c(e,"class",n)},d(t){t&&h(e)}}}function ri(i){let e,n=i[0]&&Rt(i);return{c(){n&&n.c(),e=K()},l(t){n&&n.l(t),e=K()},m(t,l){n&&n.m(t,l),V(t,e,l)},p(t,[l]){t[0]?n?n.p(t,l):(n=Rt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:se,o:se,d(t){n&&n.d(t),t&&h(e)}}}function oi(i,e,n){let{unit:t}=e,{points:l=null}=e,{diamondSummonLevel:s=null}=e;return i.$$set=r=>{"unit"in r&&n(0,t=r.unit),"points"in r&&n(1,l=r.points),"diamondSummonLevel"in r&&n(2,s=r.diamondSummonLevel)},[t,l,s]}class ze extends ve{constructor(e){super();ge(this,e,oi,ri,ke,{unit:0,points:1,diamondSummonLevel:2})}}function Ft(i){var m,_;let e,n,t,l,s,r,a,o,f;n=new ze({props:{unit:i[0]}}),a=new ze({props:{unit:i[1],points:(m=i[2])==null?void 0:m.points,diamondSummonLevel:(_=i[2])==null?void 0:_.summonLevel}});let u=i[2]&&Zt(i);return{c(){e=b("div"),x(n.$$.fragment),t=G(),l=b("span"),s=T("killed"),r=G(),x(a.$$.fragment),o=G(),u&&u.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var p=v(e);le(n.$$.fragment,p),t=H(p),l=w(p,"SPAN",{class:!0});var S=v(l);s=L(S,"killed"),S.forEach(h),r=H(p),le(a.$$.fragment,p),o=H(p),u&&u.l(p),p.forEach(h),this.h()},h(){c(l,"class","action svelte-1emgnp4"),c(e,"class","attack-log svelte-1emgnp4")},m(g,p){V(g,e,p),ee(n,e,null),d(e,t),d(e,l),d(l,s),d(e,r),ee(a,e,null),d(e,o),u&&u.m(e,null),f=!0},p(g,p){var U,P;const S={};p&1&&(S.unit=g[0]),n.$set(S);const N={};p&2&&(N.unit=g[1]),p&4&&(N.points=(U=g[2])==null?void 0:U.points),p&4&&(N.diamondSummonLevel=(P=g[2])==null?void 0:P.summonLevel),a.$set(N),g[2]?u?u.p(g,p):(u=Zt(g),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(g){f||(k(n.$$.fragment,g),k(a.$$.fragment,g),f=!0)},o(g){E(n.$$.fragment,g),E(a.$$.fragment,g),f=!1},d(g){g&&h(e),te(n),te(a),u&&u.d()}}}function Zt(i){let e,n,t=i[2].points+"",l,s;return{c(){e=b("span"),n=T("with "),l=T(t),s=T(" points"),this.h()},l(r){e=w(r,"SPAN",{class:!0});var a=v(e);n=L(a,"with "),l=L(a,t),s=L(a," points"),a.forEach(h),this.h()},h(){c(e,"class","action svelte-1emgnp4")},m(r,a){V(r,e,a),d(e,n),d(e,l),d(e,s)},p(r,a){a&4&&t!==(t=r[2].points+"")&&_e(l,t)},d(r){r&&h(e)}}}function ai(i){let e,n,t=i[0]&&i[1]&&Ft(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]&&l[1]?t?(t.p(l,s),s&3&&k(t,1)):(t=Ft(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function fi(i,e,n){let{attackingUnit:t}=e,{receivingUnit:l}=e,{diamond:s=void 0}=e;return i.$$set=r=>{"attackingUnit"in r&&n(0,t=r.attackingUnit),"receivingUnit"in r&&n(1,l=r.receivingUnit),"diamond"in r&&n(2,s=r.diamond)},[t,l,s]}class ui extends ve{constructor(e){super();ge(this,e,fi,ai,ke,{attackingUnit:0,receivingUnit:1,diamond:2})}}function Jt(i){let e,n,t,l,s,r,a,o;return n=new ze({props:{unit:i[0],points:i[1],diamondSummonLevel:i[2]}}),{c(){e=b("span"),x(n.$$.fragment),t=G(),l=b("div"),s=T("dropped for "),r=T(i[1]),a=T(" points!"),this.h()},l(f){e=w(f,"SPAN",{class:!0});var u=v(e);le(n.$$.fragment,u),t=H(u),l=w(u,"DIV",{class:!0});var m=v(l);s=L(m,"dropped for "),r=L(m,i[1]),a=L(m," points!"),m.forEach(h),u.forEach(h),this.h()},h(){c(l,"class","action svelte-8fryr"),c(e,"class","drop-log svelte-8fryr")},m(f,u){V(f,e,u),ee(n,e,null),d(e,t),d(e,l),d(l,s),d(l,r),d(l,a),o=!0},p(f,u){const m={};u&1&&(m.unit=f[0]),u&2&&(m.points=f[1]),u&4&&(m.diamondSummonLevel=f[2]),n.$set(m),(!o||u&2)&&_e(r,f[1])},i(f){o||(k(n.$$.fragment,f),o=!0)},o(f){E(n.$$.fragment,f),o=!1},d(f){f&&h(e),te(n)}}}function ci(i){let e,n,t=i[0]&&Jt(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=Jt(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function di(i,e,n){let{unit:t}=e,{pointsScored:l}=e,{diamondSummonLevel:s}=e;return i.$$set=r=>{"unit"in r&&n(0,t=r.unit),"pointsScored"in r&&n(1,l=r.pointsScored),"diamondSummonLevel"in r&&n(2,s=r.diamondSummonLevel)},[t,l,s]}class hi extends ve{constructor(e){super();ge(this,e,di,ci,ke,{unit:0,pointsScored:1,diamondSummonLevel:2})}}function Kt(i){let e,n,t,l,s,r;return n=new ze({props:{unit:i[0],points:i[1],diamondSummonLevel:i[2]}}),{c(){e=b("span"),x(n.$$.fragment),t=G(),l=b("div"),s=T("is summoning"),this.h()},l(a){e=w(a,"SPAN",{class:!0});var o=v(e);le(n.$$.fragment,o),t=H(o),l=w(o,"DIV",{class:!0});var f=v(l);s=L(f,"is summoning"),f.forEach(h),o.forEach(h),this.h()},h(){c(l,"class","action svelte-1y6izm7"),c(e,"class","drop-log svelte-1y6izm7")},m(a,o){V(a,e,o),ee(n,e,null),d(e,t),d(e,l),d(l,s),r=!0},p(a,o){const f={};o&1&&(f.unit=a[0]),o&2&&(f.points=a[1]),o&4&&(f.diamondSummonLevel=a[2]),n.$set(f)},i(a){r||(k(n.$$.fragment,a),r=!0)},o(a){E(n.$$.fragment,a),r=!1},d(a){a&&h(e),te(n)}}}function mi(i){let e,n,t=i[0]&&Kt(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=Kt(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function _i(i,e,n){let{unit:t}=e,{points:l}=e,{diamondCurrentSummonLevel:s}=e;return i.$$set=r=>{"unit"in r&&n(0,t=r.unit),"points"in r&&n(1,l=r.points),"diamondCurrentSummonLevel"in r&&n(2,s=r.diamondCurrentSummonLevel)},[t,l,s]}class pi extends ve{constructor(e){super();ge(this,e,_i,mi,ke,{unit:0,points:1,diamondCurrentSummonLevel:2})}}function Qt(i){let e,n,t,l,s,r,a,o,f;n=new ze({props:{unit:i[0]}}),a=new ze({props:{unit:i[1],points:i[3],diamondSummonLevel:i[2]}});let u=i[3]!==null&&i[0].teamId!==i[1].teamId&&xt(i);return{c(){e=b("div"),x(n.$$.fragment),t=G(),l=b("span"),s=T("vined"),r=G(),x(a.$$.fragment),o=G(),u&&u.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var _=v(e);le(n.$$.fragment,_),t=H(_),l=w(_,"SPAN",{class:!0});var g=v(l);s=L(g,"vined"),g.forEach(h),r=H(_),le(a.$$.fragment,_),o=H(_),u&&u.l(_),_.forEach(h),this.h()},h(){c(l,"class","action svelte-18eogp2"),c(e,"class","attack-log svelte-18eogp2")},m(m,_){V(m,e,_),ee(n,e,null),d(e,t),d(e,l),d(l,s),d(e,r),ee(a,e,null),d(e,o),u&&u.m(e,null),f=!0},p(m,_){const g={};_&1&&(g.unit=m[0]),n.$set(g);const p={};_&2&&(p.unit=m[1]),_&8&&(p.points=m[3]),_&4&&(p.diamondSummonLevel=m[2]),a.$set(p),m[3]!==null&&m[0].teamId!==m[1].teamId?u?u.p(m,_):(u=xt(m),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(m){f||(k(n.$$.fragment,m),k(a.$$.fragment,m),f=!0)},o(m){E(n.$$.fragment,m),E(a.$$.fragment,m),f=!1},d(m){m&&h(e),te(n),te(a),u&&u.d()}}}function xt(i){let e,n,t;return{c(){e=b("span"),n=T(i[3]),t=T(" dropped"),this.h()},l(l){e=w(l,"SPAN",{class:!0});var s=v(e);n=L(s,i[3]),t=L(s," dropped"),s.forEach(h),this.h()},h(){c(e,"class","action svelte-18eogp2")},m(l,s){V(l,e,s),d(e,n),d(e,t)},p(l,s){s&8&&_e(n,l[3])},d(l){l&&h(e)}}}function vi(i){let e,n,t=i[0]&&i[1]&&Qt(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]&&l[1]?t?(t.p(l,s),s&3&&k(t,1)):(t=Qt(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function gi(i,e,n){let{viningUnit:t}=e,{receivingUnit:l}=e,{diamondSummonLevel:s=null}=e,{diamondPoints:r=null}=e;return i.$$set=a=>{"viningUnit"in a&&n(0,t=a.viningUnit),"receivingUnit"in a&&n(1,l=a.receivingUnit),"diamondSummonLevel"in a&&n(2,s=a.diamondSummonLevel),"diamondPoints"in a&&n(3,r=a.diamondPoints)},[t,l,s,r]}class ki extends ve{constructor(e){super();ge(this,e,gi,vi,ke,{viningUnit:0,receivingUnit:1,diamondSummonLevel:2,diamondPoints:3})}}function el(i){let e,n,t,l,s,r;return n=new ze({props:{unit:i[0]}}),{c(){e=b("div"),x(n.$$.fragment),t=G(),l=b("span"),s=T("timed out!"),this.h()},l(a){e=w(a,"DIV",{class:!0});var o=v(e);le(n.$$.fragment,o),t=H(o),l=w(o,"SPAN",{class:!0});var f=v(l);s=L(f,"timed out!"),f.forEach(h),o.forEach(h),this.h()},h(){c(l,"class","action svelte-bo8syd"),c(e,"class","command-timeout-log svelte-bo8syd")},m(a,o){V(a,e,o),ee(n,e,null),d(e,t),d(e,l),d(l,s),r=!0},p(a,o){const f={};o&1&&(f.unit=a[0]),n.$set(f)},i(a){r||(k(n.$$.fragment,a),r=!0)},o(a){E(n.$$.fragment,a),r=!1},d(a){a&&h(e),te(n)}}}function bi(i){let e,n,t=i[0]&&el(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=el(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function wi(i,e,n){let{unit:t}=e;return i.$$set=l=>{"unit"in l&&n(0,t=l.unit)},[t]}class Ei extends ve{constructor(e){super();ge(this,e,wi,bi,ke,{unit:0})}}function tl(i){let e,n,t,l,s,r;return n=new ze({props:{unit:i[0]}}),{c(){e=b("div"),x(n.$$.fragment),t=G(),l=b("span"),s=T("disconnected \u{1FAA6}"),this.h()},l(a){e=w(a,"DIV",{class:!0});var o=v(e);le(n.$$.fragment,o),t=H(o),l=w(o,"SPAN",{class:!0});var f=v(l);s=L(f,"disconnected \u{1FAA6}"),f.forEach(h),o.forEach(h),this.h()},h(){c(l,"class","action svelte-1e0nd1o"),c(e,"class","team-disconnect-log svelte-1e0nd1o")},m(a,o){V(a,e,o),ee(n,e,null),d(e,t),d(e,l),d(l,s),r=!0},p(a,o){const f={};o&1&&(f.unit=a[0]),n.$set(f)},i(a){r||(k(n.$$.fragment,a),r=!0)},o(a){E(n.$$.fragment,a),r=!1},d(a){a&&h(e),te(n)}}}function yi(i){let e,n,t=i[0]&&tl(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=tl(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Ii(i,e,n){let{unit:t}=e;return i.$$set=l=>{"unit"in l&&n(0,t=l.unit)},[t]}class $i extends ve{constructor(e){super();ge(this,e,Ii,yi,ke,{unit:0})}}const Si=(i,e)=>i?kt(i.slice(Math.max(0,e-100),e+1)):[],Di=(i,e)=>{var n;if(!!i)return(n=kt(i.slice(e+1)).shift())==null?void 0:n.index},Pi=(i,e)=>{var n;if(!!i)return(n=kt(i.slice(0,e)).pop())==null?void 0:n.index};function kt(i){const e=[];return i.forEach(n=>{var l;const t=n.teams.find(s=>s.id===n.playingTeamId);(l=t==null?void 0:t.events)==null||l.forEach(s=>{var r,a;if(s.action==="COMMAND_TIMEOUT"){const o=t.units[0];e.push({component:Ei,componentProps:{unit:o},tick:n.tick+1,index:n.index+1,key:n.tick+"-"+s.action+"-"+s.unitId})}if(s.action==="DISCONNECT"){const o=t.units[0];e.push({component:$i,componentProps:{unit:o},tick:n.tick+1,index:n.index+1,key:n.tick+"-"+s.action+"-"+s.unitId})}if(s.action==="ATTACK"){const o=n.allUnitsPerId[s.attackEvent.targetUnitId],f=n.allUnitsPerId[s.unitId];e.push({component:ui,componentProps:{attackingUnit:f,receivingUnit:o,diamond:(a=(r=n.diamondsPerId)==null?void 0:r[f.diamondId])!=null?a:null},tick:n.tick+1,index:n.index+1,key:n.tick+"-"+s.action+"-"+s.unitId})}if(s.action==="DROP"){const o=n.allUnitsPerId[s.unitId];e.push({component:hi,componentProps:{unit:o,pointsScored:s.dropEvent.pointsScored,diamondSummonLevel:s.dropEvent.diamondSummonLevel},tick:n.tick+1,index:n.index+1,key:n.tick+"-"+s.action+"-"+s.unitId})}if(s.action==="SUMMON"){const o=n.allUnitsPerId[s.unitId];e.push({component:pi,componentProps:{unit:o,points:s.summonEvent.diamondPoints,diamondCurrentSummonLevel:s.summonEvent.diamondCurrentSummonLevel},tick:n.tick+1,index:n.index+1,key:n.tick+"-"+s.action+"-"+s.unitId})}if(s.action==="VINE"){const o=n.allUnitsPerId[s.vineEvent.vineUnitId],f=n.allUnitsPerId[s.unitId];e.push({component:ki,componentProps:{viningUnit:f,receivingUnit:o,diamondSummonLevel:s.vineEvent.diamondSummonLevel,diamondPoints:s.vineEvent.diamondPoints},tick:n.tick+1,index:n.index+1,key:n.tick+"-"+s.action+"-"+s.unitId})}})}),e}function Vi(i){let e,n,t,l,s,r,a,o,f,u,m,_,g,p,S,N,U,P,A,M,I,O,D,R,q,ne,C,$,y,j,X,W,z,ie,Y,ue,me,ce,B,F,Ee,oe,pe,Q,de,be,we,$e,Ue;return{c(){e=Z("svg"),n=Z("g"),t=Z("path"),l=Z("path"),s=Z("path"),r=Z("path"),a=Z("path"),o=Z("path"),f=Z("path"),u=Z("path"),m=Z("path"),_=Z("path"),g=Z("defs"),p=Z("linearGradient"),S=Z("stop"),U=Z("stop"),A=Z("stop"),I=Z("linearGradient"),O=Z("stop"),D=Z("stop"),R=Z("linearGradient"),q=Z("stop"),ne=Z("stop"),C=Z("linearGradient"),$=Z("stop"),y=Z("stop"),j=Z("linearGradient"),X=Z("stop"),W=Z("stop"),z=Z("linearGradient"),ie=Z("stop"),Y=Z("stop"),ue=Z("linearGradient"),me=Z("stop"),ce=Z("stop"),B=Z("stop"),F=Z("linearGradient"),Ee=Z("stop"),oe=Z("stop"),pe=Z("linearGradient"),Q=Z("stop"),de=Z("stop"),be=Z("stop"),we=Z("linearGradient"),$e=Z("stop"),Ue=Z("stop"),this.h()},l(Ie){e=J(Ie,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var Te=v(e);n=J(Te,"g",{transform:!0});var ye=v(n);t=J(ye,"path",{fill:!0,d:!0,transform:!0}),v(t).forEach(h),l=J(ye,"path",{stroke:!0,d:!0}),v(l).forEach(h),s=J(ye,"path",{fill:!0,d:!0}),v(s).forEach(h),r=J(ye,"path",{fill:!0,d:!0}),v(r).forEach(h),a=J(ye,"path",{fill:!0,d:!0}),v(a).forEach(h),o=J(ye,"path",{fill:!0,d:!0}),v(o).forEach(h),f=J(ye,"path",{fill:!0,d:!0}),v(f).forEach(h),u=J(ye,"path",{fill:!0,d:!0}),v(u).forEach(h),m=J(ye,"path",{fill:!0,d:!0}),v(m).forEach(h),_=J(ye,"path",{fill:!0,d:!0}),v(_).forEach(h),ye.forEach(h),g=J(Te,"defs",{});var Pe=v(g);p=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var Ne=v(p);S=J(Ne,"stop",{"stop-color":!0}),v(S).forEach(h),U=J(Ne,"stop",{offset:!0,"stop-color":!0}),v(U).forEach(h),A=J(Ne,"stop",{offset:!0,"stop-color":!0}),v(A).forEach(h),Ne.forEach(h),I=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var Be=v(I);O=J(Be,"stop",{"stop-color":!0}),v(O).forEach(h),D=J(Be,"stop",{offset:!0,"stop-color":!0}),v(D).forEach(h),Be.forEach(h),R=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var Ce=v(R);q=J(Ce,"stop",{"stop-color":!0}),v(q).forEach(h),ne=J(Ce,"stop",{offset:!0,"stop-color":!0}),v(ne).forEach(h),Ce.forEach(h),C=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var je=v(C);$=J(je,"stop",{"stop-color":!0}),v($).forEach(h),y=J(je,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),v(y).forEach(h),je.forEach(h),j=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var re=v(j);X=J(re,"stop",{"stop-color":!0}),v(X).forEach(h),W=J(re,"stop",{offset:!0,"stop-color":!0}),v(W).forEach(h),re.forEach(h),z=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var he=v(z);ie=J(he,"stop",{"stop-color":!0}),v(ie).forEach(h),Y=J(he,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),v(Y).forEach(h),he.forEach(h),ue=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var Oe=v(ue);me=J(Oe,"stop",{"stop-color":!0}),v(me).forEach(h),ce=J(Oe,"stop",{offset:!0,"stop-color":!0}),v(ce).forEach(h),B=J(Oe,"stop",{offset:!0,"stop-color":!0}),v(B).forEach(h),Oe.forEach(h),F=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var qe=v(F);Ee=J(qe,"stop",{"stop-color":!0}),v(Ee).forEach(h),oe=J(qe,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),v(oe).forEach(h),qe.forEach(h),pe=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var Ge=v(pe);Q=J(Ge,"stop",{"stop-color":!0}),v(Q).forEach(h),de=J(Ge,"stop",{offset:!0,"stop-color":!0}),v(de).forEach(h),be=J(Ge,"stop",{offset:!0,"stop-color":!0}),v(be).forEach(h),Ge.forEach(h),we=J(Pe,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0,gradientUnits:!0});var Xe=v(we);$e=J(Xe,"stop",{"stop-color":!0}),v($e).forEach(h),Ue=J(Xe,"stop",{offset:!0,"stop-color":!0,"stop-opacity":!0}),v(Ue).forEach(h),Xe.forEach(h),Pe.forEach(h),Te.forEach(h),this.h()},h(){c(t,"fill","url(#a)"),c(t,"d","M21 0h40v4H21z"),c(t,"transform","rotate(90 21 0)"),c(l,"stroke","url(#b)"),c(l,"d","M21 40c0-2.5-4.5-4.5-4.5-9s8.5-9.5 4-14c-3.7-3.7-4-6-3.5-9s4-3.5 4-8"),c(s,"fill","url(#d)"),c(s,"d","M15 22.2s-2 .1-2.8 2.7c-.5 1.4-1.9 1.6-1.9 1.6s4.3 3 6.8-.3c1.2-1.5 1-4.4-2.1-4Z"),c(r,"fill","url(#e)"),c(r,"d","M11.6 26.7c1.7-.4 3-1 4-1.6 0 .4-.2 1.5-1.1 2 .8-.3 1.2-.8 1.4-2.2 1-.7 1.5-1.3 1.5-1.3l-.3-.7s-.3.6-1 1.3c-.7-.8-1.9-.8-2.4-.7 1.2 0 1.9.5 2.1.9l-1.1.9a3 3 0 0 0-1.8-.2c.3 0 1 0 1.6.3-.7.5-1.7 1-3 1.3Z"),c(a,"fill","url(#f)"),c(a,"d","M15.7 11s-1.8.3-3.1-2c-.7-1.1-2-1-2-1s3.3-3.7 6.3-1.1c1.4 1.2 1.8 3.9-1.2 4.1Z"),c(o,"fill","url(#g)"),c(o,"d","M11.7 7.5c1.7 0 3 .3 4 .7 0-.4-.4-1.3-1.4-1.7.8.2 1.3.5 1.7 1.8 1.1.5 1.7 1 1.7 1l-.2.6-1.2-1c-.4 1-1.5 1.1-2 1.1 1-.1 1.6-.8 1.8-1.2a9 9 0 0 0-1.2-.6c-.5.3-1.1.6-1.7.5.3 0 1-.1 1.5-.6-.8-.3-1.8-.5-3-.6Z"),c(f,"fill","url(#h)"),c(f,"d","M21 32s1.6 1.8 4.6.6a3 3 0 0 1 3 .5s-.3-6.4-5.5-6.3c-2.3 0-5 2.5-2.2 5.2Z"),c(u,"fill","url(#i)"),c(u,"d","M27.9 31.8a15.2 15.2 0 0 0-4.6-2.7c.4-.4 1.6-1 2.8-.5-.9-.5-1.7-.6-3.2.3-1.5-.5-2.5-.5-2.5-.5l-.3.8h2c-.4 1.3.5 2.5 1 2.9a3 3 0 0 1-.7-2.8l1.7.5c.2.7.6 1.5 1.2 2-.3-.3-.8-1-1-1.9 1.1.4 2.3 1 3.6 2Z"),c(m,"fill","url(#j)"),c(m,"d","M22.6 17.2s2.2.2 3.7-2.5a2.9 2.9 0 0 1 2.4-1.5s-4.3-4.3-7.8-1c-1.6 1.6-2 4.9 1.7 5Z"),c(_,"fill","url(#k)"),c(_,"d","M27.7 13.2a15 15 0 0 0-5.3.5c.1-.5.7-1.6 2-2-1 .2-1.8.6-2.4 2.2-1.5.5-2.3 1-2.3 1l.2.9s.5-.6 1.6-1.2c.5 1.2 1.9 1.6 2.6 1.6a3 3 0 0 1-2.3-1.7c.5-.2 1-.5 1.7-.6.5.3 1.3.8 2 .8-.3 0-1.2-.3-1.8-1l4-.5Z"),c(n,"transform",i[1]),c(S,"stop-color",N=i[0].medium),c(U,"offset",".4"),c(U,"stop-color",P=i[0].light),c(A,"offset","1"),c(A,"stop-color",M=i[0].dark),c(p,"id","a"),c(p,"x1","35"),c(p,"x2","35"),c(p,"y1","0"),c(p,"y2","6.3"),c(p,"gradientUnits","userSpaceOnUse"),c(O,"stop-color","#0B1D41"),c(D,"offset",".9"),c(D,"stop-color","#064642"),c(I,"id","b"),c(I,"x1","14"),c(I,"x2","21.1"),c(I,"y1","42"),c(I,"y2","42"),c(I,"gradientUnits","userSpaceOnUse"),c(q,"stop-color","#064642"),c(ne,"offset","1"),c(ne,"stop-color","#04663D"),c(R,"id","d"),c(R,"x1","17.1"),c(R,"x2","11.8"),c(R,"y1","24.1"),c(R,"y2","24.8"),c(R,"gradientUnits","userSpaceOnUse"),c($,"stop-color","#06343E"),c(y,"offset","1"),c(y,"stop-color","#06343E"),c(y,"stop-opacity","0"),c(C,"id","e"),c(C,"x1","15.1"),c(C,"x2","16.9"),c(C,"y1","24.8"),c(C,"y2","23.4"),c(C,"gradientUnits","userSpaceOnUse"),c(X,"stop-color","#064642"),c(W,"offset","1"),c(W,"stop-color","#04663D"),c(j,"id","f"),c(j,"x1","17.3"),c(j,"x2","12.2"),c(j,"y1","8.8"),c(j,"y2","9.2"),c(j,"gradientUnits","userSpaceOnUse"),c(ie,"stop-color","#06343E"),c(Y,"offset","1"),c(Y,"stop-color","#06343E"),c(Y,"stop-opacity","0"),c(z,"id","g"),c(z,"x1","15.3"),c(z,"x2","17.3"),c(z,"y1","8.6"),c(z,"y2","9.5"),c(z,"gradientUnits","userSpaceOnUse"),c(me,"stop-color","#0B1D41"),c(ce,"offset",".5"),c(ce,"stop-color","#064642"),c(B,"offset","1"),c(B,"stop-color","#04663D"),c(ue,"id","h"),c(ue,"x1","20"),c(ue,"x2","27"),c(ue,"y1","29.5"),c(ue,"y2","33"),c(ue,"gradientUnits","userSpaceOnUse"),c(Ee,"stop-color","#06343E"),c(oe,"offset","1"),c(oe,"stop-color","#06343E"),c(oe,"stop-opacity","0"),c(F,"id","i"),c(F,"x1","23.4"),c(F,"x2","20.6"),c(F,"y1","29.8"),c(F,"y2","29.1"),c(F,"gradientUnits","userSpaceOnUse"),c(Q,"stop-color","#0A1B3E"),c(de,"offset",".4"),c(de,"stop-color","#064246"),c(be,"offset",".9"),c(be,"stop-color","#04663D"),c(pe,"id","j"),c(pe,"x1","19.9"),c(pe,"x2","29.1"),c(pe,"y1","15.8"),c(pe,"y2","12.6"),c(pe,"gradientUnits","userSpaceOnUse"),c($e,"stop-color","#06343E"),c(Ue,"offset","1"),c(Ue,"stop-color","#06343E"),c(Ue,"stop-opacity","0"),c(we,"id","k"),c(we,"x1","25.6"),c(we,"x2","19.7"),c(we,"y1","14.7"),c(we,"y2","15.3"),c(we,"gradientUnits","userSpaceOnUse"),c(e,"class","vine svelte-8rwtco"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 40 40")},m(Ie,Te){V(Ie,e,Te),d(e,n),d(n,t),d(n,l),d(n,s),d(n,r),d(n,a),d(n,o),d(n,f),d(n,u),d(n,m),d(n,_),d(e,g),d(g,p),d(p,S),d(p,U),d(p,A),d(g,I),d(I,O),d(I,D),d(g,R),d(R,q),d(R,ne),d(g,C),d(C,$),d(C,y),d(g,j),d(j,X),d(j,W),d(g,z),d(z,ie),d(z,Y),d(g,ue),d(ue,me),d(ue,ce),d(ue,B),d(g,F),d(F,Ee),d(F,oe),d(g,pe),d(pe,Q),d(pe,de),d(pe,be),d(g,we),d(we,$e),d(we,Ue)},p(Ie,[Te]){Te&1&&N!==(N=Ie[0].medium)&&c(S,"stop-color",N),Te&1&&P!==(P=Ie[0].light)&&c(U,"stop-color",P),Te&1&&M!==(M=Ie[0].dark)&&c(A,"stop-color",M)},i:se,o:se,d(Ie){Ie&&h(e)}}}function Ti(i,e,n){let t,{isVertical:l=!1}=e,{teamIndex:s}=e;const r=[{medium:"#EB1D1D",light:"#FF9D9D",dark:"#DD4D4D"},{medium:"#2859BE",light:"#6C9CFF",dark:"#3D5B99"},{medium:"#16793E",light:"#94EB8C",dark:"#2E7B3A"},{medium:"#E5B91B",light:"#FFF8BA",dark:"#DB763C"}];let a=l?"rotate(90 20 20)":"";return i.$$set=o=>{"isVertical"in o&&n(2,l=o.isVertical),"teamIndex"in o&&n(3,s=o.teamIndex)},i.$$.update=()=>{i.$$.dirty&8&&n(0,t=r[s])},[t,a,l,s]}class Li extends ve{constructor(e){super();ge(this,e,Ti,Vi,ke,{isVertical:2,teamIndex:3})}}function Ni(i){let e,n;const t=i[3].default,l=st(t,i,i[2],null);return{c(){e=b("div"),l&&l.c(),this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0});var r=v(e);l&&l.l(r),r.forEach(h),this.h()},h(){c(e,"class","tooltip svelte-z4m9is"),Le(e,"width",i[0]+"px"),Le(e,"left","-"+(i[0]/2-i[1])+"px")},m(s,r){V(s,e,r),l&&l.m(e,null),n=!0},p(s,[r]){l&&l.p&&(!n||r&4)&&lt(l,t,s,s[2],n?it(t,s[2],r,null):nt(s[2]),null),(!n||r&1)&&Le(e,"width",s[0]+"px"),(!n||r&3)&&Le(e,"left","-"+(s[0]/2-s[1])+"px")},i(s){n||(k(l,s),n=!0)},o(s){E(l,s),n=!1},d(s){s&&h(e),l&&l.d(s)}}}function Ui(i,e,n){let{$$slots:t={},$$scope:l}=e,{width:s=200}=e,{offsetX:r=0}=e;return i.$$set=a=>{"width"in a&&n(0,s=a.width),"offsetX"in a&&n(1,r=a.offsetX),"$$scope"in a&&n(2,l=a.$$scope)},[s,r,l,t]}class ll extends ve{constructor(e){super();ge(this,e,Ui,Ni,ke,{width:0,offsetX:1})}}const Ai=(i,e)=>{if(!i)return[];const n=[];return i.slice(Math.max(0,e-25),e+1).filter(t=>!("playingTeamId"in t)||t.index===e).forEach(t=>{Object.values(t.allUnitsPerId).filter(l=>!!l.lastState.wasAttackedBy&&!l.hasSpawned).forEach(l=>{l.lastState.positionBeforeDying?n.push({teamIndex:l.teamIndex,unit:l,position:l.lastState.positionBeforeDying}):console.warn("A unit was found that died without 'positionBeforeDying', it will be ignored.")})}),n};function nl(i,e,n){const t=i.slice();return t[7]=e[n],t}function il(i){let e,n,t,l,s,r,a,o,f=i[3],u=[];for(let g=0;g<f.length;g+=1)u[g]=sl(nl(i,f,g));const m=i[5].default,_=st(m,i,i[4],null);return{c(){e=Z("svg"),n=Z("defs");for(let g=0;g<u.length;g+=1)u[g].c();t=Z("pattern"),l=Z("image"),s=Z("pattern"),r=Z("image"),_&&_.c(),this.h()},l(g){e=J(g,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0,preserveAspectRatio:!0});var p=v(e);n=J(p,"defs",{});var S=v(n);for(let P=0;P<u.length;P+=1)u[P].l(S);t=J(S,"pattern",{id:!0,patternUnits:!0,width:!0,height:!0});var N=v(t);l=J(N,"image",{width:!0,height:!0,"xlink:href":!0}),v(l).forEach(h),N.forEach(h),s=J(S,"pattern",{id:!0,patternUnits:!0,width:!0,height:!0});var U=v(s);r=J(U,"image",{width:!0,height:!0,"xlink:href":!0}),v(r).forEach(h),U.forEach(h),S.forEach(h),_&&_.l(p),p.forEach(h),this.h()},h(){c(l,"width","32"),c(l,"height","32"),Vt(l,"xlink:href","/tileset/Vine (Lasso).png"),c(t,"id","vine"),c(t,"patternUnits","userSpaceOnUse"),c(t,"width","1"),c(t,"height","1"),c(r,"width","32"),c(r,"height","32"),Vt(r,"xlink:href","/tileset/Vine (Lasso) Vertical.png"),c(s,"id","vine-vertical"),c(s,"patternUnits","userSpaceOnUse"),c(s,"width","1"),c(s,"height","1"),c(e,"width","100%"),c(e,"height","100%"),c(e,"viewBox",a="0 0 "+i[2]+" "+i[1]),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"preserveAspectRatio","xMidYMin meet")},m(g,p){V(g,e,p),d(e,n);for(let S=0;S<u.length;S+=1)u[S].m(n,null);d(n,t),d(t,l),d(n,s),d(s,r),_&&_.m(e,null),o=!0},p(g,p){if(p&8){f=g[3];let S;for(S=0;S<f.length;S+=1){const N=nl(g,f,S);u[S]?u[S].p(N,p):(u[S]=sl(N),u[S].c(),u[S].m(n,t))}for(;S<u.length;S+=1)u[S].d(1);u.length=f.length}_&&_.p&&(!o||p&16)&&lt(_,m,g,g[4],o?it(m,g[4],p,null):nt(g[4]),null),(!o||p&6&&a!==(a="0 0 "+g[2]+" "+g[1]))&&c(e,"viewBox",a)},i(g){o||(k(_,g),o=!0)},o(g){E(_,g),o=!1},d(g){g&&h(e),De(u,g),_&&_.d(g)}}}function sl(i){let e,n;return{c(){e=Z("marker"),n=Z("path"),this.h()},l(t){e=J(t,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,refX:!0,refY:!0,orient:!0});var l=v(e);n=J(l,"path",{d:!0}),v(n).forEach(h),l.forEach(h),this.h()},h(){c(n,"d","M 0 0 L 7 3.5 L 0 7 z"),c(e,"class","fill-"+i[7]+" svelte-1tpajqs"),c(e,"id","arrow-"+i[7]),c(e,"markerWidth","7"),c(e,"markerHeight","7"),c(e,"refX","13"),c(e,"refY","3.5"),c(e,"orient","auto")},m(t,l){V(t,e,l),d(e,n)},p:se,d(t){t&&h(e)}}}function Ci(i){let e,n,t=i[0]&&il(i);return{c(){e=b("div"),t&&t.c(),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=v(e);t&&t.l(s),s.forEach(h),this.h()},h(){c(e,"class","container svelte-1tpajqs")},m(l,s){V(l,e,s),t&&t.m(e,null),n=!0},p(l,[s]){l[0]?t?(t.p(l,s),s&1&&k(t,1)):(t=il(l),t.c(),k(t,1),t.m(e,null)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){l&&h(e),t&&t.d()}}}function Bi(i,e,n){let t,l,{$$slots:s={},$$scope:r}=e,{container:a}=e;function o(){n(2,t=a?a.clientWidth:0),n(1,l=a?a.clientHeight:0)}gt(()=>{window.addEventListener("resize",o)});const f=[1,2,3,4];return i.$$set=u=>{"container"in u&&n(0,a=u.container),"$$scope"in u&&n(4,r=u.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&n(2,t=a?a.clientWidth:0),i.$$.dirty&1&&n(1,l=a?a.clientHeight:0)},[a,l,t,f,r,s]}class Oi extends ve{constructor(e){super();ge(this,e,Bi,Ci,ke,{container:0})}}function rl(i,e,n){const t=i.slice();return t[6]=e[n],t[8]=n,t}function ol(i){let e,n=i[1],t=[];for(let l=0;l<n.length;l+=1)t[l]=al(rl(i,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=K()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=K()},m(l,s){for(let r=0;r<t.length;r+=1)t[r].m(l,s);V(l,e,s)},p(l,s){if(s&7){n=l[1];let r;for(r=0;r<n.length;r+=1){const a=rl(l,n,r);t[r]?t[r].p(a,s):(t[r]=al(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},d(l){De(t,l),l&&h(e)}}}function al(i){let e,n,t,l,s,r;return{c(){e=Z("line"),this.h()},l(a){e=J(a,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-width":!0,fill:!0}),v(e).forEach(h),this.h()},h(){c(e,"class",n="line-"+i[0]+" svelte-1e0b6vh"),c(e,"x1",t=i[8]===0?i[2].x:i[1][i[8]-1].x),c(e,"y1",l=i[8]===0?i[2].y:i[1][i[8]-1].y),c(e,"x2",s=i[6].x),c(e,"y2",r=i[6].y),c(e,"stroke-width","1"),c(e,"fill","none")},m(a,o){V(a,e,o)},p(a,o){o&1&&n!==(n="line-"+a[0]+" svelte-1e0b6vh")&&c(e,"class",n),o&6&&t!==(t=a[8]===0?a[2].x:a[1][a[8]-1].x)&&c(e,"x1",t),o&6&&l!==(l=a[8]===0?a[2].y:a[1][a[8]-1].y)&&c(e,"y1",l),o&2&&s!==(s=a[6].x)&&c(e,"x2",s),o&2&&r!==(r=a[6].y)&&c(e,"y2",r)},d(a){a&&h(e)}}}function Mi(i){var t;let e,n=((t=i[1])==null?void 0:t.length)>1&&ol(i);return{c(){n&&n.c(),e=K()},l(l){n&&n.l(l),e=K()},m(l,s){n&&n.m(l,s),V(l,e,s)},p(l,[s]){var r;((r=l[1])==null?void 0:r.length)>1?n?n.p(l,s):(n=ol(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:se,o:se,d(l){n&&n.d(l),l&&h(e)}}}function rt(i){return{x:i?i.offsetLeft+i.offsetWidth/2:0,y:i?i.offsetTop+i.offsetHeight/2:0}}function ji(i,e,n){let t,{currentPosition:l}=e,{paths:s=[]}=e,{player:r}=e;gt(()=>{window.addEventListener("resize",a)});function a(){n(2,t=rt(l)),n(1,o=s==null?void 0:s.map(rt))}let o;return i.$$set=f=>{"currentPosition"in f&&n(3,l=f.currentPosition),"paths"in f&&n(4,s=f.paths),"player"in f&&n(0,r=f.player)},i.$$.update=()=>{i.$$.dirty&8&&n(2,t=rt(l)),i.$$.dirty&16&&n(1,o=s==null?void 0:s.map(rt))},[r,o,t,l,s]}class Gi extends ve{constructor(e){super();ge(this,e,ji,Mi,ke,{currentPosition:3,paths:4,player:0})}}const{Boolean:We}=hn;function fl(i,e,n){const t=i.slice();return t[25]=e[n],t[27]=n,t}function ul(i,e,n){const t=i.slice();return t[28]=e[n],t}function cl(i,e,n){const t=i.slice();return t[31]=e[n],t[32]=e,t[33]=n,t}function dl(i,e,n){const t=i.slice();return t[34]=e[n],t[35]=e,t[36]=n,t}function hl(i,e,n){const t=i.slice();return t[37]=e[n].x,t[38]=e[n].y,t[39]=e[n].isHalf,t[40]=e[n].isRightHalf,t[41]=e[n].vinedByTeamIndex,t[42]=e[n].isVertical,t}function ml(i,e,n){const t=i.slice();return t[45]=e[n].position,t[28]=e[n].unit,t[27]=e[n].teamIndex,t}function _l(i,e,n){const t=i.slice();return t[48]=e[n],t}function pl(i,e,n){const t=i.slice();return t[25]=e[n],t[27]=n,t}function vl(i,e,n){const t=i.slice();return t[28]=e[n],t[53]=n,t}function Hi(i){let e;return{c(){e=b("div"),this.h()},l(n){e=w(n,"DIV",{"data-ohno":!0}),v(e).forEach(h),this.h()},h(){c(e,"data-ohno","no-ticks-yet")},m(n,t){V(n,e,t)},p:se,i:se,o:se,d(n){n&&h(e)}}}function zi(i){let e,n,t,l,s=i[2].map.viewerTiles,r=[];for(let o=0;o<s.length;o+=1)r[o]=Ul(cl(i,s,o));const a=o=>E(r[o],1,1,()=>{r[o]=null});return t=new Oi({props:{container:i[7],$$slots:{default:[Wi]},$$scope:{ctx:i}}}),{c(){e=b("div");for(let o=0;o<r.length;o+=1)r[o].c();n=G(),x(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0});var f=v(e);for(let u=0;u<r.length;u+=1)r[u].l(f);n=H(f),le(t.$$.fragment,f),f.forEach(h),this.h()},h(){c(e,"class","grid svelte-c6taiv"),Le(e,"aspect-ratio",i[10]+" / "+i[9]),Le(e,"grid-template-columns","repeat("+i[10]+", minmax(2px, 1fr))"),Le(e,"grid-template-rows","repeat("+i[9]+", minmax(2px, 1fr))")},m(o,f){V(o,e,f);for(let u=0;u<r.length;u+=1)r[u].m(e,null);d(e,n),ee(t,e,null),i[24](e),l=!0},p(o,f){if(f[0]&16766){s=o[2].map.viewerTiles;let m;for(m=0;m<s.length;m+=1){const _=cl(o,s,m);r[m]?(r[m].p(_,f),k(r[m],1)):(r[m]=Ul(_),r[m].c(),k(r[m],1),r[m].m(e,n))}for(ae(),m=s.length;m<r.length;m+=1)a(m);fe()}const u={};f[0]&128&&(u.container=o[7]),f[0]&5|f[1]&8388608&&(u.$$scope={dirty:f,ctx:o}),t.$set(u),(!l||f[0]&1536)&&Le(e,"aspect-ratio",o[10]+" / "+o[9]),(!l||f[0]&1024)&&Le(e,"grid-template-columns","repeat("+o[10]+", minmax(2px, 1fr))"),(!l||f[0]&512)&&Le(e,"grid-template-rows","repeat("+o[9]+", minmax(2px, 1fr))")},i(o){if(!l){for(let f=0;f<s.length;f+=1)k(r[f]);k(t.$$.fragment,o),l=!0}},o(o){r=r.filter(We);for(let f=0;f<r.length;f+=1)E(r[f]);E(t.$$.fragment,o),l=!1},d(o){o&&h(e),De(r,o),te(t),i[24](null)}}}function gl(i){var m;let e,n,t,l,s,r,a,o,f=i[28].hasDiamond&&kl(i),u=((m=i[5])==null?void 0:m.id)===i[28].id&&bl(i);return{c(){e=b("div"),f&&f.c(),n=G(),u&&u.c(),t=G(),this.h()},l(_){e=w(_,"DIV",{class:!0});var g=v(e);f&&f.l(g),n=H(g),u&&u.l(g),t=H(g),g.forEach(h),this.h()},h(){var _;c(e,"class",l="unit animal-"+(i[27]+1)+(i[28].isSummoning?"-summon":"")+" animal-"+(i[27]+1)+"-"+(i[53]+1)+(i[28].isSummoning?"-summon":"")+" "+(i[28].lastState.wasVinedBy?`vine-${i[2].allUnitsPerId[i[28].lastState.wasVinedBy].teamIndex+1}`:"")+" "+(i[28].isSummoning?`summons-${(_=i[2].diamondsPerId[i[28].diamondId])==null?void 0:_.summonLevel}`:"")+" svelte-c6taiv"),Ae(e,"summons",i[28].isSummoning),Ae(e,"vine",i[28].lastState.wasVinedBy)},m(_,g){V(_,e,g),f&&f.m(e,null),d(e,n),u&&u.m(e,null),d(e,t),r=!0,a||(o=Tt(s=i[11].call(null,e,{unit:i[28]})),a=!0)},p(_,g){var p,S;i=_,i[28].hasDiamond?f?f.p(i,g):(f=kl(i),f.c(),f.m(e,n)):f&&(f.d(1),f=null),((p=i[5])==null?void 0:p.id)===i[28].id?u?(u.p(i,g),g[0]&36&&k(u,1)):(u=bl(i),u.c(),k(u,1),u.m(e,t)):u&&(ae(),E(u,1,1,()=>{u=null}),fe()),(!r||g[0]&4&&l!==(l="unit animal-"+(i[27]+1)+(i[28].isSummoning?"-summon":"")+" animal-"+(i[27]+1)+"-"+(i[53]+1)+(i[28].isSummoning?"-summon":"")+" "+(i[28].lastState.wasVinedBy?`vine-${i[2].allUnitsPerId[i[28].lastState.wasVinedBy].teamIndex+1}`:"")+" "+(i[28].isSummoning?`summons-${(S=i[2].diamondsPerId[i[28].diamondId])==null?void 0:S.summonLevel}`:"")+" svelte-c6taiv"))&&c(e,"class",l),s&&Ke(s.update)&&g[0]&4&&s.update.call(null,{unit:i[28]}),g[0]&4&&Ae(e,"summons",i[28].isSummoning),g[0]&4&&Ae(e,"vine",i[28].lastState.wasVinedBy)},i(_){r||(k(u),r=!0)},o(_){E(u),r=!1},d(_){_&&h(e),f&&f.d(),u&&u.d(),a=!1,o()}}}function kl(i){let e,n;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){c(e,"class",n="holding-diamond "+(i[28].hasDiamond?i[14](i[2].diamondsPerId[i[28].diamondId]):"")+" svelte-c6taiv")},m(t,l){V(t,e,l)},p(t,l){l[0]&4&&n!==(n="holding-diamond "+(t[28].hasDiamond?t[14](t[2].diamondsPerId[t[28].diamondId]):"")+" svelte-c6taiv")&&c(e,"class",n)},d(t){t&&h(e)}}}function bl(i){var t;let e,n;return e=new ll({props:{offsetX:((t=i[4][i[33]][i[36]])==null?void 0:t.clientWidth)/2,$$slots:{default:[qi]},$$scope:{ctx:i}}}),{c(){x(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){ee(e,l,s),n=!0},p(l,s){var a;const r={};s[0]&16&&(r.offsetX=((a=l[4][l[33]][l[36]])==null?void 0:a.clientWidth)/2),s[0]&4|s[1]&8388608&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){E(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function wl(i){let e,n,t=i[2].diamondsPerId[i[28].diamondId].summonLevel+"",l,s,r=i[2].diamondsPerId[i[28].diamondId].points+"",a,o;return{c(){e=b("span"),n=T("\u{1F48E} LVL "),l=T(t),s=T(", "),a=T(r),o=T("pts"),this.h()},l(f){e=w(f,"SPAN",{class:!0});var u=v(e);n=L(u,"\u{1F48E} LVL "),l=L(u,t),s=L(u,", "),a=L(u,r),o=L(u,"pts"),u.forEach(h),this.h()},h(){c(e,"class","unit-data-score svelte-c6taiv")},m(f,u){V(f,e,u),d(e,n),d(e,l),d(e,s),d(e,a),d(e,o)},p(f,u){u[0]&4&&t!==(t=f[2].diamondsPerId[f[28].diamondId].summonLevel+"")&&_e(l,t),u[0]&4&&r!==(r=f[2].diamondsPerId[f[28].diamondId].points+"")&&_e(a,r)},d(f){f&&h(e)}}}function qi(i){let e,n,t=i[25].name+"",l,s,r=He[i[53]%He.length]+"",a,o,f=i[28].hasDiamond&&wl(i);return{c(){e=b("div"),n=b("div"),l=T(t),s=T("'s "),a=T(r),o=G(),f&&f.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var m=v(e);n=w(m,"DIV",{class:!0});var _=v(n);l=L(_,t),s=L(_,"'s "),a=L(_,r),_.forEach(h),o=H(m),f&&f.l(m),m.forEach(h),this.h()},h(){c(n,"class","unit-data-team svelte-c6taiv"),c(e,"class","unit-data player-"+(i[27]+1)+" svelte-c6taiv")},m(u,m){V(u,e,m),d(e,n),d(n,l),d(n,s),d(n,a),d(e,o),f&&f.m(e,null)},p(u,m){m[0]&4&&t!==(t=u[25].name+"")&&_e(l,t),m[0]&4&&r!==(r=He[u[53]%He.length]+"")&&_e(a,r),u[28].hasDiamond?f?f.p(u,m):(f=wl(u),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(u){u&&h(e),f&&f.d()}}}function El(i,e){let n,t=Ol(e[28],e[33],e[36],"playingTeamId"in e[2]),l,s,r=t&&gl(e);return{key:i,first:null,c(){n=K(),r&&r.c(),l=K(),this.h()},l(a){n=K(),r&&r.l(a),l=K(),this.h()},h(){this.first=n},m(a,o){V(a,n,o),r&&r.m(a,o),V(a,l,o),s=!0},p(a,o){e=a,o[0]&4&&(t=Ol(e[28],e[33],e[36],"playingTeamId"in e[2])),t?r?(r.p(e,o),o[0]&4&&k(r,1)):(r=gl(e),r.c(),k(r,1),r.m(l.parentNode,l)):r&&(ae(),E(r,1,1,()=>{r=null}),fe())},i(a){s||(k(r),s=!0)},o(a){E(r),s=!1},d(a){a&&h(n),r&&r.d(a),a&&h(l)}}}function yl(i){let e=[],n=new Map,t,l,s=i[25].units;const r=a=>a[28].id;for(let a=0;a<s.length;a+=1){let o=vl(i,s,a),f=r(o);n.set(f,e[a]=El(f,o))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=K()},l(a){for(let o=0;o<e.length;o+=1)e[o].l(a);t=K()},m(a,o){for(let f=0;f<e.length;f+=1)e[f].m(a,o);V(a,t,o),l=!0},p(a,o){o[0]&16436&&(s=a[25].units,ae(),e=pt(e,o,r,1,a,s,n,t.parentNode,Dt,El,t,vl),fe())},i(a){if(!l){for(let o=0;o<s.length;o+=1)k(e[o]);l=!0}},o(a){for(let o=0;o<e.length;o+=1)E(e[o]);l=!1},d(a){for(let o=0;o<e.length;o+=1)e[o].d(a);a&&h(t)}}}function Il(i){var o;let e,n,t,l,s,r,a=((o=i[6])==null?void 0:o.id)===i[48].id&&$l(i);return{c(){e=b("div"),a&&a.c(),this.h()},l(f){e=w(f,"DIV",{class:!0});var u=v(e);a&&a.l(u),u.forEach(h),this.h()},h(){c(e,"class",n="diamond "+i[14](i[48])+" svelte-c6taiv")},m(f,u){V(f,e,u),a&&a.m(e,null),l=!0,s||(r=Tt(t=i[12].call(null,e,{diamond:i[48]})),s=!0)},p(f,u){var m;i=f,((m=i[6])==null?void 0:m.id)===i[48].id?a?(a.p(i,u),u[0]&68&&k(a,1)):(a=$l(i),a.c(),k(a,1),a.m(e,null)):a&&(ae(),E(a,1,1,()=>{a=null}),fe()),(!l||u[0]&4&&n!==(n="diamond "+i[14](i[48])+" svelte-c6taiv"))&&c(e,"class",n),t&&Ke(t.update)&&u[0]&4&&t.update.call(null,{diamond:i[48]})},i(f){l||(k(a),l=!0)},o(f){E(a),l=!1},d(f){f&&h(e),a&&a.d(),s=!1,r()}}}function $l(i){var t;let e,n;return e=new ll({props:{offsetX:((t=i[4][i[33]][i[36]])==null?void 0:t.clientWidth)/2,$$slots:{default:[Xi]},$$scope:{ctx:i}}}),{c(){x(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,s){ee(e,l,s),n=!0},p(l,s){var a;const r={};s[0]&16&&(r.offsetX=((a=l[4][l[33]][l[36]])==null?void 0:a.clientWidth)/2),s[0]&4|s[1]&8388608&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){E(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function Xi(i){let e,n,t,l=i[48].summonLevel+"",s,r,a=i[48].points+"",o,f;return{c(){e=b("div"),n=b("span"),t=T("\u{1F48E} LVL "),s=T(l),r=T(", "),o=T(a),f=T("pts"),this.h()},l(u){e=w(u,"DIV",{class:!0});var m=v(e);n=w(m,"SPAN",{class:!0});var _=v(n);t=L(_,"\u{1F48E} LVL "),s=L(_,l),r=L(_,", "),o=L(_,a),f=L(_,"pts"),_.forEach(h),m.forEach(h),this.h()},h(){c(n,"class","diamond-data-score svelte-c6taiv"),c(e,"class","diamond-data svelte-c6taiv")},m(u,m){V(u,e,m),d(e,n),d(n,t),d(n,s),d(n,r),d(n,o),d(n,f)},p(u,m){m[0]&4&&l!==(l=u[48].summonLevel+"")&&_e(s,l),m[0]&4&&a!==(a=u[48].points+"")&&_e(o,a)},d(u){u&&h(e)}}}function Sl(i){let e,n,t=!i[48].ownerId&&i[48].position.x===i[33]&&i[48].position.y===i[36]&&Il(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,s){!l[48].ownerId&&l[48].position.x===l[33]&&l[48].position.y===l[36]?t?(t.p(l,s),s[0]&4&&k(t,1)):(t=Il(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Dl(i){let e,n;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){c(e,"class",n="death death-"+(i[27]+1)+" svelte-c6taiv")},m(t,l){V(t,e,l)},p(t,l){l[0]&256&&n!==(n="death death-"+(t[27]+1)+" svelte-c6taiv")&&c(e,"class",n)},d(t){t&&h(e)}}}function Pl(i){let e,n=i[45].x===i[33]&&i[45].y===i[36]&&Dl(i);return{c(){n&&n.c(),e=K()},l(t){n&&n.l(t),e=K()},m(t,l){n&&n.m(t,l),V(t,e,l)},p(t,l){t[45].x===t[33]&&t[45].y===t[36]?n?n.p(t,l):(n=Dl(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&h(e)}}}function Vl(i){let e,n,t,l;return{c(){e=b("div"),n=T(i[33]),t=T(","),l=T(i[36]),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=v(e);n=L(r,i[33]),t=L(r,","),l=L(r,i[36]),r.forEach(h),this.h()},h(){c(e,"class","absolute coordinates svelte-c6taiv")},m(s,r){V(s,e,r),d(e,n),d(e,t),d(e,l)},d(s){s&&h(e)}}}function Tl(i){let e,n;return e=new Li({props:{isVertical:i[42],teamIndex:i[41]}}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},p(t,l){const s={};l[0]&8&&(s.isVertical=t[42]),l[0]&8&&(s.teamIndex=t[41]),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function Ll(i){let e,n,t=i[37]===i[33]&&i[38]===i[36]&&Tl(i);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,s){t&&t.m(l,s),V(l,e,s),n=!0},p(l,s){l[37]===l[33]&&l[38]===l[36]?t?(t.p(l,s),s[0]&8&&k(t,1)):(t=Tl(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(ae(),E(t,1,1,()=>{t=null}),fe())},i(l){n||(k(t),n=!0)},o(l){E(t),n=!1},d(l){t&&t.d(l),l&&h(e)}}}function Nl(i){let e,n,t,l,s,r,a,o,f,u=i[33],m=i[36],_,g=i[2].teams,p=[];for(let C=0;C<g.length;C+=1)p[C]=yl(pl(i,g,C));const S=C=>E(p[C],1,1,()=>{p[C]=null});let N=i[2].map.diamonds,U=[];for(let C=0;C<N.length;C+=1)U[C]=Sl(_l(i,N,C));const P=C=>E(U[C],1,1,()=>{U[C]=null});let A=i[8],M=[];for(let C=0;C<A.length;C+=1)M[C]=Pl(ml(i,A,C));let I=i[1]&&Vl(i),O=i[3],D=[];for(let C=0;C<O.length;C+=1)D[C]=Ll(hl(i,O,C));const R=C=>E(D[C],1,1,()=>{D[C]=null}),q=()=>i[23](e,u,m),ne=()=>i[23](null,u,m);return{c(){e=b("div"),n=b("div");for(let C=0;C<p.length;C+=1)p[C].c();t=G(),l=b("div");for(let C=0;C<U.length;C+=1)U[C].c();s=G();for(let C=0;C<M.length;C+=1)M[C].c();r=G(),I&&I.c(),a=G(),o=b("div");for(let C=0;C<D.length;C+=1)D[C].c();this.h()},l(C){e=w(C,"DIV",{class:!0});var $=v(e);n=w($,"DIV",{class:!0});var y=v(n);for(let W=0;W<p.length;W+=1)p[W].l(y);y.forEach(h),t=H($),l=w($,"DIV",{class:!0});var j=v(l);for(let W=0;W<U.length;W+=1)U[W].l(j);s=H(j);for(let W=0;W<M.length;W+=1)M[W].l(j);j.forEach(h),r=H($),I&&I.l($),a=H($),o=w($,"DIV",{class:!0});var X=v(o);for(let W=0;W<D.length;W+=1)D[W].l(X);X.forEach(h),$.forEach(h),this.h()},h(){c(n,"class","absolute center-child units svelte-c6taiv"),c(l,"class","absolute center-child svelte-c6taiv"),c(o,"class","absolute vines svelte-c6taiv"),c(e,"class",f="tile background-tile-"+i[34]+" center-child svelte-c6taiv")},m(C,$){V(C,e,$),d(e,n);for(let y=0;y<p.length;y+=1)p[y].m(n,null);d(e,t),d(e,l);for(let y=0;y<U.length;y+=1)U[y].m(l,null);d(l,s);for(let y=0;y<M.length;y+=1)M[y].m(l,null);d(e,r),I&&I.m(e,null),d(e,a),d(e,o);for(let y=0;y<D.length;y+=1)D[y].m(o,null);q(),_=!0},p(C,$){if(i=C,$[0]&16436){g=i[2].teams;let y;for(y=0;y<g.length;y+=1){const j=pl(i,g,y);p[y]?(p[y].p(j,$),k(p[y],1)):(p[y]=yl(j),p[y].c(),k(p[y],1),p[y].m(n,null))}for(ae(),y=g.length;y<p.length;y+=1)S(y);fe()}if($[0]&16468){N=i[2].map.diamonds;let y;for(y=0;y<N.length;y+=1){const j=_l(i,N,y);U[y]?(U[y].p(j,$),k(U[y],1)):(U[y]=Sl(j),U[y].c(),k(U[y],1),U[y].m(l,s))}for(ae(),y=N.length;y<U.length;y+=1)P(y);fe()}if($[0]&256){A=i[8];let y;for(y=0;y<A.length;y+=1){const j=ml(i,A,y);M[y]?M[y].p(j,$):(M[y]=Pl(j),M[y].c(),M[y].m(l,null))}for(;y<M.length;y+=1)M[y].d(1);M.length=A.length}if(i[1]?I||(I=Vl(i),I.c(),I.m(e,a)):I&&(I.d(1),I=null),$[0]&8){O=i[3];let y;for(y=0;y<O.length;y+=1){const j=hl(i,O,y);D[y]?(D[y].p(j,$),k(D[y],1)):(D[y]=Ll(j),D[y].c(),k(D[y],1),D[y].m(o,null))}for(ae(),y=O.length;y<D.length;y+=1)R(y);fe()}(!_||$[0]&4&&f!==(f="tile background-tile-"+i[34]+" center-child svelte-c6taiv"))&&c(e,"class",f),(u!==i[33]||m!==i[36])&&(ne(),u=i[33],m=i[36],q())},i(C){if(!_){for(let $=0;$<g.length;$+=1)k(p[$]);for(let $=0;$<N.length;$+=1)k(U[$]);for(let $=0;$<O.length;$+=1)k(D[$]);_=!0}},o(C){p=p.filter(We);for(let $=0;$<p.length;$+=1)E(p[$]);U=U.filter(We);for(let $=0;$<U.length;$+=1)E(U[$]);D=D.filter(We);for(let $=0;$<D.length;$+=1)E(D[$]);_=!1},d(C){C&&h(e),De(p,C),De(U,C),De(M,C),I&&I.d(),De(D,C),ne()}}}function Ul(i){let e,n,t=i[31],l=[];for(let r=0;r<t.length;r+=1)l[r]=Nl(dl(i,t,r));const s=r=>E(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=K()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=K()},m(r,a){for(let o=0;o<l.length;o+=1)l[o].m(r,a);V(r,e,a),n=!0},p(r,a){if(a[0]&16766){t=r[31];let o;for(o=0;o<t.length;o+=1){const f=dl(r,t,o);l[o]?(l[o].p(f,a),k(l[o],1)):(l[o]=Nl(f),l[o].c(),k(l[o],1),l[o].m(e.parentNode,e))}for(ae(),o=t.length;o<l.length;o+=1)s(o);fe()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)k(l[a]);n=!0}},o(r){l=l.filter(We);for(let a=0;a<l.length;a+=1)E(l[a]);n=!1},d(r){De(l,r),r&&h(e)}}}function Al(i){let e,n;return e=new Gi({props:{player:i[27]+1,currentPosition:i[13](i[28].position),paths:i[28].path.map(i[13])}}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},p(t,l){const s={};l[0]&4&&(s.currentPosition=t[13](t[28].position)),l[0]&4&&(s.paths=t[28].path.map(t[13])),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function Cl(i){var r,a;let e,n,t,l=i[0]&&((a=(r=i[28])==null?void 0:r.path)==null?void 0:a.length)>0&&Al(i),s=!1;return{c(){l&&l.c(),e=G(),s&&s.c(),n=K()},l(o){l&&l.l(o),e=H(o),s&&s.l(o),n=K()},m(o,f){l&&l.m(o,f),V(o,e,f),s&&s.m(o,f),V(o,n,f),t=!0},p(o,f){var u,m;o[0]&&((m=(u=o[28])==null?void 0:u.path)==null?void 0:m.length)>0?l?(l.p(o,f),f[0]&5&&k(l,1)):(l=Al(o),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(ae(),E(l,1,1,()=>{l=null}),fe()),s&&(ae(),E(s,1,1,()=>{s=null}),fe())},i(o){t||(k(l),k(s),t=!0)},o(o){E(l),E(s),t=!1},d(o){l&&l.d(o),o&&h(e),s&&s.d(o),o&&h(n)}}}function Bl(i){let e,n,t=i[25].units,l=[];for(let r=0;r<t.length;r+=1)l[r]=Cl(ul(i,t,r));const s=r=>E(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=K()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=K()},m(r,a){for(let o=0;o<l.length;o+=1)l[o].m(r,a);V(r,e,a),n=!0},p(r,a){if(a[0]&8197){t=r[25].units;let o;for(o=0;o<t.length;o+=1){const f=ul(r,t,o);l[o]?(l[o].p(f,a),k(l[o],1)):(l[o]=Cl(f),l[o].c(),k(l[o],1),l[o].m(e.parentNode,e))}for(ae(),o=t.length;o<l.length;o+=1)s(o);fe()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)k(l[a]);n=!0}},o(r){l=l.filter(We);for(let a=0;a<l.length;a+=1)E(l[a]);n=!1},d(r){De(l,r),r&&h(e)}}}function Wi(i){let e,n,t=i[2].teams,l=[];for(let r=0;r<t.length;r+=1)l[r]=Bl(fl(i,t,r));const s=r=>E(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=K()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=K()},m(r,a){for(let o=0;o<l.length;o+=1)l[o].m(r,a);V(r,e,a),n=!0},p(r,a){if(a[0]&8197){t=r[2].teams;let o;for(o=0;o<t.length;o+=1){const f=fl(r,t,o);l[o]?(l[o].p(f,a),k(l[o],1)):(l[o]=Bl(f),l[o].c(),k(l[o],1),l[o].m(e.parentNode,e))}for(ae(),o=t.length;o<l.length;o+=1)s(o);fe()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)k(l[a]);n=!0}},o(r){l=l.filter(We);for(let a=0;a<l.length;a+=1)E(l[a]);n=!1},d(r){De(l,r),r&&h(e)}}}function Ri(i){let e,n,t,l;const s=[zi,Hi],r=[];function a(o,f){return o[2]&&o[10]>0&&o[9]>0?0:1}return e=a(i),n=r[e]=s[e](i),{c(){n.c(),t=K()},l(o){n.l(o),t=K()},m(o,f){r[e].m(o,f),V(o,t,f),l=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(ae(),E(r[u],1,1,()=>{r[u]=null}),fe(),n=r[e],n?n.p(o,f):(n=r[e]=s[e](o),n.c()),k(n,1),n.m(t.parentNode,t))},i(o){l||(k(n),l=!0)},o(o){E(n),l=!1},d(o){r[e].d(o),o&&h(t)}}}function Ol(i,e,n,t){return i.hasSpawned?t&&i.lastState.wasVinedBy?i.lastState.positionBefore.x===e&&i.lastState.positionBefore.y==n:i.position.x===e&&i.position.y===n:!1}function Yi(i,e,n){let t,l,s,r,a;var o,f,u,m,_,g;let{ticks:p=[]}=e,{tickIndex:S=0}=e,{showPaths:N=!1}=e,{showCoordinates:U=!1}=e;const P=Array.from(new Array(100)).map(()=>[]);Pt(()=>{var $,y;if(A!==null){let j;t.teams.forEach(X=>X.units.forEach(W=>{W.id===A.id&&(j=W)})),(A.position.x!==(($=j==null?void 0:j.position)===null||$===void 0?void 0:$.x)||A.position.y!==((y=j==null?void 0:j.position)===null||y===void 0?void 0:y.y))&&n(5,A=null)}});let A=null;function M($,{unit:y}){function j(){n(5,A=null)}$.addEventListener("mouseenter",()=>{n(5,A=y)}),$.addEventListener("mouseleave",j),$.addEventListener("mouseout",j)}let I=null;function O($,{diamond:y}){function j(){n(6,I=null)}$.addEventListener("mouseenter",()=>{n(6,I=y)}),$.addEventListener("mouseleave",j),$.addEventListener("mouseout",j)}let D;function R($){return P[$.x][$.y]}function q($){return`diamond-${$.summonLevel}-${et($.points)}`}function ne($,y,j){Me[$?"unshift":"push"](()=>{P[y][j]=$,n(4,P)})}function C($){Me[$?"unshift":"push"](()=>{D=$,n(7,D)})}return i.$$set=$=>{"ticks"in $&&n(15,p=$.ticks),"tickIndex"in $&&n(16,S=$.tickIndex),"showPaths"in $&&n(0,N=$.showPaths),"showCoordinates"in $&&n(1,U=$.showCoordinates)},i.$$.update=()=>{i.$$.dirty[0]&98304&&n(2,t=p==null?void 0:p[S]),i.$$.dirty[0]&393220&&n(10,l=(n(18,f=n(17,o=t==null?void 0:t.map)===null||o===void 0?void 0:o.viewerTiles)===null||f===void 0?void 0:f.length)||0),i.$$.dirty[0]&3670020&&n(9,s=(n(21,_=n(20,m=n(19,u=t==null?void 0:t.map)===null||u===void 0?void 0:u.viewerTiles)===null||m===void 0?void 0:m[0])===null||_===void 0?void 0:_.length)||0),i.$$.dirty[0]&98304&&n(8,r=Ai(p,S)),i.$$.dirty[0]&4194308&&n(3,a=n(22,g=t==null?void 0:t.teams.flatMap($=>$.units.flatMap(y=>{if(y.hasSpawned&&y.lastState.wasVinedBy){const j=y.lastState.positionBefore,X=t.allUnitsPerId[y.lastState.wasVinedBy].lastState.positionBefore;if(j&&X){const W=Math.min(X.x,j.x),z=Math.max(X.x,j.x),ie=Math.min(X.y,j.y),Y=Math.max(X.y,j.y),ue=ie===Y,me=[],ce=t.allUnitsPerId[y.lastState.wasVinedBy].teamIndex;for(let B=W;B<=z;B++)for(let F=ie;F<=Y;F++)j.x===B&&j.y===F||X.x===B&&X.y===F||me.push({x:B,y:F,vinedByTeamIndex:ce,isVertical:ue});return me}}}).filter(Boolean)))!==null&&g!==void 0?g:[])},[N,U,t,a,P,A,I,D,r,s,l,M,O,R,q,p,S,o,f,u,m,_,g,ne,C]}class Fi extends ve{constructor(e){super();ge(this,e,Yi,Ri,ke,{ticks:15,tickIndex:16,showPaths:0,showCoordinates:1},null,[-1,-1])}}function Zi(i){let e,n,t,l,s,r,a,o,f,u,m,_,g,p,S,N,U,P,A,M,I,O,D,R,q,ne,C,$,y,j,X,W,z,ie,Y,ue,me,ce,B,F,Ee,oe,pe,Q,de,be,we,$e,Ue,Ie,Te,ye,Pe,Ne,Be,Ce,je;return n=new Qe({props:{title:"HOTKEYS",center:!0}}),r=new Ve({props:{key:"1"}}),o=new Ve({props:{key:"9"}}),_=new Ve({props:{key:"Spacebar"}}),N=new Ve({props:{key:"Z"}}),M=new Ve({props:{key:"X"}}),R=new Ve({props:{key:","}}),$=new Ve({props:{key:"."}}),W=new Ve({props:{key:"D"}}),ue=new Ve({props:{key:"P"}}),F=new Ve({props:{key:"G"}}),Q=new Ve({props:{key:"\u{1F862}"}}),$e=new Ve({props:{key:"\u{1F860}"}}),ye=new Ve({props:{key:"H"}}),Ce=new Ve({props:{key:"S"}}),{c(){e=b("section"),x(n.$$.fragment),t=G(),l=b("div"),s=T("Adjust game playback speed "),x(r.$$.fragment),a=T(" to"),x(o.$$.fragment),f=G(),u=b("div"),m=T("Play/Pause "),x(_.$$.fragment),g=G(),p=b("div"),S=T("Jump to the start of the game "),x(N.$$.fragment),U=G(),P=b("div"),A=T("Jump to the end of the game "),x(M.$$.fragment),I=G(),O=b("div"),D=T("Go back one player's turn (comma) "),x(R.$$.fragment),q=G(),ne=b("div"),C=T("Go forward one player's turn (period) "),x($.$$.fragment),y=G(),j=b("div"),X=T("Display points chart "),x(W.$$.fragment),z=G(),ie=b("div"),Y=T("Show/Hide planned paths "),x(ue.$$.fragment),me=G(),ce=b("div"),B=T("Show/Hide (x,y) tile coordinates "),x(F.$$.fragment),Ee=G(),oe=b("div"),pe=T("Jump to the next event "),x(Q.$$.fragment),de=G(),be=b("div"),we=T("Jump to the previous event "),x($e.$$.fragment),Ue=G(),Ie=b("div"),Te=T("Close this menu "),x(ye.$$.fragment),Pe=G(),Ne=b("div"),Be=T("Presenter mode "),x(Ce.$$.fragment),this.h()},l(re){e=w(re,"SECTION",{class:!0});var he=v(e);le(n.$$.fragment,he),t=H(he),l=w(he,"DIV",{class:!0});var Oe=v(l);s=L(Oe,"Adjust game playback speed "),le(r.$$.fragment,Oe),a=L(Oe," to"),le(o.$$.fragment,Oe),Oe.forEach(h),f=H(he),u=w(he,"DIV",{class:!0});var qe=v(u);m=L(qe,"Play/Pause "),le(_.$$.fragment,qe),qe.forEach(h),g=H(he),p=w(he,"DIV",{class:!0});var Ge=v(p);S=L(Ge,"Jump to the start of the game "),le(N.$$.fragment,Ge),Ge.forEach(h),U=H(he),P=w(he,"DIV",{class:!0});var Xe=v(P);A=L(Xe,"Jump to the end of the game "),le(M.$$.fragment,Xe),Xe.forEach(h),I=H(he),O=w(he,"DIV",{class:!0});var ot=v(O);D=L(ot,"Go back one player's turn (comma) "),le(R.$$.fragment,ot),ot.forEach(h),q=H(he),ne=w(he,"DIV",{class:!0});var at=v(ne);C=L(at,"Go forward one player's turn (period) "),le($.$$.fragment,at),at.forEach(h),y=H(he),j=w(he,"DIV",{class:!0});var ft=v(j);X=L(ft,"Display points chart "),le(W.$$.fragment,ft),ft.forEach(h),z=H(he),ie=w(he,"DIV",{class:!0});var ut=v(ie);Y=L(ut,"Show/Hide planned paths "),le(ue.$$.fragment,ut),ut.forEach(h),me=H(he),ce=w(he,"DIV",{class:!0});var ct=v(ce);B=L(ct,"Show/Hide (x,y) tile coordinates "),le(F.$$.fragment,ct),ct.forEach(h),Ee=H(he),oe=w(he,"DIV",{class:!0});var dt=v(oe);pe=L(dt,"Jump to the next event "),le(Q.$$.fragment,dt),dt.forEach(h),de=H(he),be=w(he,"DIV",{class:!0});var ht=v(be);we=L(ht,"Jump to the previous event "),le($e.$$.fragment,ht),ht.forEach(h),Ue=H(he),Ie=w(he,"DIV",{class:!0});var mt=v(Ie);Te=L(mt,"Close this menu "),le(ye.$$.fragment,mt),mt.forEach(h),Pe=H(he),Ne=w(he,"DIV",{class:!0});var _t=v(Ne);Be=L(_t,"Presenter mode "),le(Ce.$$.fragment,_t),_t.forEach(h),he.forEach(h),this.h()},h(){c(l,"class","svelte-ykjnlb"),c(u,"class","svelte-ykjnlb"),c(p,"class","svelte-ykjnlb"),c(P,"class","svelte-ykjnlb"),c(O,"class","svelte-ykjnlb"),c(ne,"class","svelte-ykjnlb"),c(j,"class","svelte-ykjnlb"),c(ie,"class","svelte-ykjnlb"),c(ce,"class","svelte-ykjnlb"),c(oe,"class","svelte-ykjnlb"),c(be,"class","svelte-ykjnlb"),c(Ie,"class","svelte-ykjnlb"),c(Ne,"class","svelte-ykjnlb"),c(e,"class","svelte-ykjnlb")},m(re,he){V(re,e,he),ee(n,e,null),d(e,t),d(e,l),d(l,s),ee(r,l,null),d(l,a),ee(o,l,null),d(e,f),d(e,u),d(u,m),ee(_,u,null),d(e,g),d(e,p),d(p,S),ee(N,p,null),d(e,U),d(e,P),d(P,A),ee(M,P,null),d(e,I),d(e,O),d(O,D),ee(R,O,null),d(e,q),d(e,ne),d(ne,C),ee($,ne,null),d(e,y),d(e,j),d(j,X),ee(W,j,null),d(e,z),d(e,ie),d(ie,Y),ee(ue,ie,null),d(e,me),d(e,ce),d(ce,B),ee(F,ce,null),d(e,Ee),d(e,oe),d(oe,pe),ee(Q,oe,null),d(e,de),d(e,be),d(be,we),ee($e,be,null),d(e,Ue),d(e,Ie),d(Ie,Te),ee(ye,Ie,null),d(e,Pe),d(e,Ne),d(Ne,Be),ee(Ce,Ne,null),je=!0},p:se,i(re){je||(k(n.$$.fragment,re),k(r.$$.fragment,re),k(o.$$.fragment,re),k(_.$$.fragment,re),k(N.$$.fragment,re),k(M.$$.fragment,re),k(R.$$.fragment,re),k($.$$.fragment,re),k(W.$$.fragment,re),k(ue.$$.fragment,re),k(F.$$.fragment,re),k(Q.$$.fragment,re),k($e.$$.fragment,re),k(ye.$$.fragment,re),k(Ce.$$.fragment,re),je=!0)},o(re){E(n.$$.fragment,re),E(r.$$.fragment,re),E(o.$$.fragment,re),E(_.$$.fragment,re),E(N.$$.fragment,re),E(M.$$.fragment,re),E(R.$$.fragment,re),E($.$$.fragment,re),E(W.$$.fragment,re),E(ue.$$.fragment,re),E(F.$$.fragment,re),E(Q.$$.fragment,re),E($e.$$.fragment,re),E(ye.$$.fragment,re),E(Ce.$$.fragment,re),je=!1},d(re){re&&h(e),te(n),te(r),te(o),te(_),te(N),te(M),te(R),te($),te(W),te(ue),te(F),te(Q),te($e),te(ye),te(Ce)}}}class Ji extends ve{constructor(e){super();ge(this,e,null,Zi,ke,{})}}function Ki(i){let e,n,t,l;return{c(){e=Z("svg"),n=Z("g"),t=Z("path"),l=Z("path"),this.h()},l(s){e=J(s,"svg",{viewBox:!0,fill:!0,stroke:!0,xmlns:!0});var r=v(e);n=J(r,"g",{transform:!0});var a=v(n);t=J(a,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),v(t).forEach(h),l=J(a,"path",{d:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),v(l).forEach(h),a.forEach(h),r.forEach(h),this.h()},h(){c(t,"d","M4.24848 6.11589C4.47768 6.48833 5.01905 6.48833 5.24825 6.11589L8.20705 1.30784C8.44771 0.916767 8.16635 0.41326 7.70717 0.41326H1.78956C1.33038 0.41326 1.04902 0.916767 1.28968 1.30784L4.24848 6.11589Z"),c(t,"stroke-width","0.826087"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(l,"d","M4.24848 10.1159C4.47768 10.4883 5.01905 10.4883 5.24825 10.1159L8.20705 5.30784C8.44771 4.91677 8.16635 4.41326 7.70717 4.41326H1.78956C1.33038 4.41326 1.04902 4.91677 1.28968 5.30784L4.24848 10.1159Z"),c(l,"stroke-width","0.826087"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(n,"transform","rotate(270 6 5) translate(1 0)"),c(e,"viewBox","0 0 12 10"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(s,r){V(s,e,r),d(e,n),d(n,t),d(n,l)},p:se,i:se,o:se,d(s){s&&h(e)}}}class Qi extends ve{constructor(e){super();ge(this,e,null,Ki,ke,{})}}function Ml(i,e,n){const t=i.slice();return t[3]=e[n],t[5]=n,t}function xi(i,e,n){const t=i.slice();return t[3]=e[n],t[5]=n,t}function jl(i,e,n){const t=i.slice();return t[3]=e[n],t[8]=n,t}function Gl(i){var _,g;let e,n,t,l,s,r=i[2][i[8]]+"",a,o=(((_=i[2])==null?void 0:_[i[8]+1])?`-${((g=i[2])==null?void 0:g[i[8]+1])-1}`:"+")+"",f,u,m;return{c(){e=b("div"),n=b("div"),l=G(),s=b("div"),a=T(r),f=T(o),u=T(" pts"),m=G(),this.h()},l(p){e=w(p,"DIV",{});var S=v(e);n=w(S,"DIV",{class:!0}),v(n).forEach(h),l=H(S),s=w(S,"DIV",{class:!0});var N=v(s);a=L(N,r),f=L(N,o),u=L(N," pts"),N.forEach(h),m=H(S),S.forEach(h),this.h()},h(){c(n,"class",t="diamond diamond-5-"+(i[8]+1)+" svelte-iclaqu"),c(s,"class","text-golden")},m(p,S){V(p,e,S),d(e,n),d(e,l),d(e,s),d(s,a),d(s,f),d(s,u),d(e,m)},p:se,d(p){p&&h(e)}}}function es(i){let e;return{c(){e=b("div"),this.h()},l(n){e=w(n,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){c(e,"class","first-spacer svelte-iclaqu")},m(n,t){V(n,e,t)},i:se,o:se,d(n){n&&h(e)}}}function ts(i){let e,n=i[5]+1+"",t,l,s,r,a,o,f;return r=new Qi({}),{c(){e=b("div"),t=T(n),l=T(` turns
					`),s=b("div"),x(r.$$.fragment),a=G(),o=b("div"),this.h()},l(u){e=w(u,"DIV",{class:!0});var m=v(e);t=L(m,n),l=L(m,` turns
					`),s=w(m,"DIV",{class:!0});var _=v(s);le(r.$$.fragment,_),_.forEach(h),m.forEach(h),a=H(u),o=w(u,"DIV",{class:!0}),v(o).forEach(h),this.h()},h(){c(s,"class","svg-container svelte-iclaqu"),c(e,"class","summon-info svelte-iclaqu"),c(o,"class","spacer")},m(u,m){V(u,e,m),d(e,t),d(e,l),d(e,s),ee(r,s,null),V(u,a,m),V(u,o,m),f=!0},i(u){f||(k(r.$$.fragment,u),f=!0)},o(u){E(r.$$.fragment,u),f=!1},d(u){u&&h(e),te(r),u&&h(a),u&&h(o)}}}function ls(i){let e,n,t,l;const s=[ts,es],r=[];function a(o,f){return o[5]>0?0:1}return e=a(i),n=r[e]=s[e](i),{c(){n.c(),t=K()},l(o){n.l(o),t=K()},m(o,f){r[e].m(o,f),V(o,t,f),l=!0},p:se,i(o){l||(k(n),l=!0)},o(o){E(n),l=!1},d(o){r[e].d(o),o&&h(t)}}}function Hl(i){let e,n,t,l,s,r=i[0]*(i[5]+1)+"",a,o;return{c(){e=b("div"),n=b("div"),l=G(),s=b("span"),a=T(r),o=T("pts"),this.h()},l(f){e=w(f,"DIV",{class:!0});var u=v(e);n=w(u,"DIV",{class:!0}),v(n).forEach(h),l=H(u),s=w(u,"SPAN",{});var m=v(s);a=L(m,r),o=L(m,"pts"),m.forEach(h),u.forEach(h),this.h()},h(){c(n,"class",t=`diamond diamond-${i[5]+1}-${et(i[0]*(i[5]+1))} svelte-iclaqu`),c(e,"class","diamond-container svelte-iclaqu")},m(f,u){V(f,e,u),d(e,n),d(e,l),d(e,s),d(s,a),d(s,o)},p(f,u){u&1&&t!==(t=`diamond diamond-${f[5]+1}-${et(f[0]*(f[5]+1))} svelte-iclaqu`)&&c(n,"class",t),u&1&&r!==(r=f[0]*(f[5]+1)+"")&&_e(a,r)},d(f){f&&h(e)}}}function ns(i){let e,n,t,l,s,r,a,o,f,u,m,_,g,p,S,N,U,P,A,M,I,O,D,R;n=new Qe({props:{title:"Diamonds & POINTS",center:!0}});let q=i[1],ne=[];for(let X=0;X<q.length;X+=1)ne[X]=Gl(jl(i,q,X));let C=i[1],$=[];for(let X=0;X<C.length;X+=1)$[X]=ls(xi(i,C,X));let y=i[1],j=[];for(let X=0;X<y.length;X+=1)j[X]=Hl(Ml(i,y,X));return{c(){e=b("section"),x(n.$$.fragment),t=G(),l=b("div"),s=T("Diamonds come in 5 different shapes."),r=b("br"),a=T(`Each diamond will change in complexity, and yield more
		points as a result.`),o=G(),f=b("div");for(let X=0;X<ne.length;X+=1)ne[X].c();u=G(),m=b("div"),_=T(`Diamonds also come in different color tiers, and each color tier represents a multiplier.
		`),g=b("br"),p=G(),S=b("br"),N=T(`
		To pass to the next tier and increase the multiplier, a player must \u201Csummon\u201D the jungle spirits while
		in possession of a given diamond`),U=G(),P=b("div");for(let X=0;X<$.length;X+=1)$[X].c();A=G();for(let X=0;X<j.length;X+=1)j[X].c();M=G(),I=b("div"),O=T("Turn "),D=T(i[0]),this.h()},l(X){e=w(X,"SECTION",{class:!0});var W=v(e);le(n.$$.fragment,W),t=H(W),l=w(W,"DIV",{class:!0});var z=v(l);s=L(z,"Diamonds come in 5 different shapes."),r=w(z,"BR",{}),a=L(z,`Each diamond will change in complexity, and yield more
		points as a result.`),z.forEach(h),o=H(W),f=w(W,"DIV",{class:!0});var ie=v(f);for(let ce=0;ce<ne.length;ce+=1)ne[ce].l(ie);ie.forEach(h),u=H(W),m=w(W,"DIV",{class:!0});var Y=v(m);_=L(Y,`Diamonds also come in different color tiers, and each color tier represents a multiplier.
		`),g=w(Y,"BR",{}),p=H(Y),S=w(Y,"BR",{}),N=L(Y,`
		To pass to the next tier and increase the multiplier, a player must \u201Csummon\u201D the jungle spirits while
		in possession of a given diamond`),Y.forEach(h),U=H(W),P=w(W,"DIV",{class:!0});var ue=v(P);for(let ce=0;ce<$.length;ce+=1)$[ce].l(ue);A=H(ue);for(let ce=0;ce<j.length;ce+=1)j[ce].l(ue);M=H(ue),I=w(ue,"DIV",{class:!0});var me=v(I);O=L(me,"Turn "),D=L(me,i[0]),me.forEach(h),ue.forEach(h),W.forEach(h),this.h()},h(){c(l,"class","svelte-iclaqu"),c(f,"class","diamonds-with-points svelte-iclaqu"),c(m,"class","svelte-iclaqu"),c(I,"class","turn-info svelte-iclaqu"),c(P,"class","diamonds-grid svelte-iclaqu"),c(e,"class","svelte-iclaqu")},m(X,W){V(X,e,W),ee(n,e,null),d(e,t),d(e,l),d(l,s),d(l,r),d(l,a),d(e,o),d(e,f);for(let z=0;z<ne.length;z+=1)ne[z].m(f,null);d(e,u),d(e,m),d(m,_),d(m,g),d(m,p),d(m,S),d(m,N),d(e,U),d(e,P);for(let z=0;z<$.length;z+=1)$[z].m(P,null);d(P,A);for(let z=0;z<j.length;z+=1)j[z].m(P,null);d(P,M),d(P,I),d(I,O),d(I,D),R=!0},p(X,[W]){if(W&4){q=X[1];let z;for(z=0;z<q.length;z+=1){const ie=jl(X,q,z);ne[z]?ne[z].p(ie,W):(ne[z]=Gl(ie),ne[z].c(),ne[z].m(f,null))}for(;z<ne.length;z+=1)ne[z].d(1);ne.length=q.length}if(W&1){y=X[1];let z;for(z=0;z<y.length;z+=1){const ie=Ml(X,y,z);j[z]?j[z].p(ie,W):(j[z]=Hl(ie),j[z].c(),j[z].m(P,M))}for(;z<j.length;z+=1)j[z].d(1);j.length=y.length}(!R||W&1)&&_e(D,X[0])},i(X){if(!R){k(n.$$.fragment,X);for(let W=0;W<C.length;W+=1)k($[W]);R=!0}},o(X){E(n.$$.fragment,X),$=$.filter(Boolean);for(let W=0;W<$.length;W+=1)E($[W]);R=!1},d(X){X&&h(e),te(n),De(ne,X),De($,X),De(j,X)}}}function is(i,e,n){const t=Array.from(new Array(5)).map((r,a)=>a),l=[0,...xe];let s=0;return setInterval(()=>{s<110?n(0,s+=1):n(0,s=0)},750),[s,t,l]}class ss extends ve{constructor(e){super();ge(this,e,is,ns,ke,{})}}function zl(i,e,n){const t=i.slice();return t[5]=e[n],t[7]=n,t}function rs(i,e,n){const t=i.slice();return t[5]=e[n],t[9]=n,t}function os(i,e,n){const t=i.slice();return t[5]=e[n],t[7]=n,t}function ql(i,e,n){const t=i.slice();return t[5]=e[n],t[7]=n,t}function as(i,e,n){const t=i.slice();return t[5]=e[n],t[9]=n,t}function fs(i){let e,n;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){c(e,"class",n="diamond-"+(i[7]+1)+"-"+(i[9]+1)+" svelte-1ti1ru7")},m(t,l){V(t,e,l)},d(t){t&&h(e)}}}function Xl(i){let e,n=i[1],t=[];for(let l=0;l<n.length;l+=1)t[l]=fs(as(i,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=K()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=K()},m(l,s){for(let r=0;r<t.length;r+=1)t[r].m(l,s);V(l,e,s)},p:se,d(l){De(t,l),l&&h(e)}}}function us(i){let e,n;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),v(e).forEach(h),this.h()},h(){c(e,"class",n="background-tile-"+(i[7]+1)+" svelte-1ti1ru7")},m(t,l){V(t,e,l)},d(t){t&&h(e)}}}function cs(i){let e,n,t,l,s;return{c(){e=b("div"),t=G(),l=b("div"),this.h()},l(r){e=w(r,"DIV",{class:!0}),v(e).forEach(h),t=H(r),l=w(r,"DIV",{class:!0}),v(l).forEach(h),this.h()},h(){c(e,"class",n="animal-"+(i[7]+1)+"-"+(i[9]+1)+" svelte-1ti1ru7"),c(l,"class",s="animal-"+(i[7]+1)+"-"+(i[9]+1)+"-summon svelte-1ti1ru7")},m(r,a){V(r,e,a),V(r,t,a),V(r,l,a)},d(r){r&&h(e),r&&h(t),r&&h(l)}}}function Wl(i){let e,n=i[4],t=[];for(let l=0;l<n.length;l+=1)t[l]=cs(rs(i,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=K()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=K()},m(l,s){for(let r=0;r<t.length;r+=1)t[r].m(l,s);V(l,e,s)},p:se,d(l){De(t,l),l&&h(e)}}}function ds(i){let e,n,t,l,s,r=i[0],a=[];for(let _=0;_<r.length;_+=1)a[_]=Xl(ql(i,r,_));let o=i[2],f=[];for(let _=0;_<o.length;_+=1)f[_]=us(os(i,o,_));let u=i[3],m=[];for(let _=0;_<u.length;_+=1)m[_]=Wl(zl(i,u,_));return{c(){e=b("div");for(let _=0;_<a.length;_+=1)a[_].c();n=G();for(let _=0;_<f.length;_+=1)f[_].c();t=G();for(let _=0;_<m.length;_+=1)m[_].c();l=G(),s=b("div"),this.h()},l(_){e=w(_,"DIV",{class:!0});var g=v(e);for(let p=0;p<a.length;p+=1)a[p].l(g);n=H(g);for(let p=0;p<f.length;p+=1)f[p].l(g);t=H(g);for(let p=0;p<m.length;p+=1)m[p].l(g);l=H(g),s=w(g,"DIV",{class:!0}),v(s).forEach(h),g.forEach(h),this.h()},h(){c(s,"class","death svelte-1ti1ru7"),c(e,"class","container svelte-1ti1ru7")},m(_,g){V(_,e,g);for(let p=0;p<a.length;p+=1)a[p].m(e,null);d(e,n);for(let p=0;p<f.length;p+=1)f[p].m(e,null);d(e,t);for(let p=0;p<m.length;p+=1)m[p].m(e,null);d(e,l),d(e,s)},p(_,[g]){if(g&2){r=_[0];let p;for(p=0;p<r.length;p+=1){const S=ql(_,r,p);a[p]?a[p].p(S,g):(a[p]=Xl(S),a[p].c(),a[p].m(e,n))}for(;p<a.length;p+=1)a[p].d(1);a.length=r.length}if(g&16){u=_[3];let p;for(p=0;p<u.length;p+=1){const S=zl(_,u,p);m[p]?m[p].p(S,g):(m[p]=Wl(S),m[p].c(),m[p].m(e,l))}for(;p<m.length;p+=1)m[p].d(1);m.length=u.length}},i:se,o:se,d(_){_&&h(e),De(a,_),De(f,_),De(m,_)}}}function hs(i){const e=Array.from(new Array(5)).map((r,a)=>a),n=Array.from(new Array(5)).map((r,a)=>a),t=Array.from(new Array(6)).map((r,a)=>a),l=Array.from(new Array(4)).map((r,a)=>a),s=Array.from(new Array(4)).map((r,a)=>a);return[e,n,t,l,s]}class ms extends ve{constructor(e){super();ge(this,e,hs,ds,ke,{})}}function Rl(i){let e,n;return e=new li({props:{$$slots:{default:[_s]},$$scope:{ctx:i}}}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},p(t,l){const s={};l&1073741984&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function Yl(i){let e,n;return e=new Ji({}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function Fl(i){let e,n;return e=new ss({}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function _s(i){let e,n,t,l=i[5]&&Yl(),s=i[7]&&Fl();return{c(){l&&l.c(),e=G(),s&&s.c(),n=K()},l(r){l&&l.l(r),e=H(r),s&&s.l(r),n=K()},m(r,a){l&&l.m(r,a),V(r,e,a),s&&s.m(r,a),V(r,n,a),t=!0},p(r,a){r[5]?l?a&32&&k(l,1):(l=Yl(),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(ae(),E(l,1,1,()=>{l=null}),fe()),r[7]?s?a&128&&k(s,1):(s=Fl(),s.c(),k(s,1),s.m(n.parentNode,n)):s&&(ae(),E(s,1,1,()=>{s=null}),fe())},i(r){t||(k(l),k(s),t=!0)},o(r){E(l),E(s),t=!1},d(r){l&&l.d(r),r&&h(e),s&&s.d(r),r&&h(n)}}}function Zl(i){let e,n,t=i[1].title+"",l,s,r,a,o,f,u=i[1].downloadLogs+"",m,_,g,p,S,N,U=i[1].gameLogs+"",P,A,M,I=i[1].map&&Jl(i);return{c(){e=b("section"),n=b("h2"),l=T(t),s=G(),I&&I.c(),r=G(),a=b("ul"),o=b("li"),f=b("a"),m=T(u),p=G(),S=b("li"),N=b("a"),P=T(U),this.h()},l(O){e=w(O,"SECTION",{});var D=v(e);n=w(D,"H2",{});var R=v(n);l=L(R,t),R.forEach(h),s=H(D),I&&I.l(D),r=H(D),a=w(D,"UL",{class:!0});var q=v(a);o=w(q,"LI",{});var ne=v(o);f=w(ne,"A",{class:!0,href:!0,download:!0,target:!0});var C=v(f);m=L(C,u),C.forEach(h),ne.forEach(h),p=H(q),S=w(q,"LI",{});var $=v(S);N=w($,"A",{class:!0,href:!0,download:!0,target:!0});var y=v(N);P=L(y,U),y.forEach(h),$.forEach(h),q.forEach(h),D.forEach(h),this.h()},h(){c(f,"class","game-bot-logs-link"),c(f,"href",_=i[1].downloadLogsLink),c(f,"download",g="bot-logs.zip"),c(f,"target","_blank"),c(N,"class","game-debug-link"),c(N,"href",A=i[1].gameLogsLink),c(N,"download",M="game-logs.zip"),c(N,"target","_blank"),c(a,"class","game-logs")},m(O,D){V(O,e,D),d(e,n),d(n,l),d(e,s),I&&I.m(e,null),d(e,r),d(e,a),d(a,o),d(o,f),d(f,m),d(a,p),d(a,S),d(S,N),d(N,P)},p(O,D){D&2&&t!==(t=O[1].title+"")&&_e(l,t),O[1].map?I?I.p(O,D):(I=Jl(O),I.c(),I.m(e,r)):I&&(I.d(1),I=null),D&2&&u!==(u=O[1].downloadLogs+"")&&_e(m,u),D&2&&_!==(_=O[1].downloadLogsLink)&&c(f,"href",_),D&2&&U!==(U=O[1].gameLogs+"")&&_e(P,U),D&2&&A!==(A=O[1].gameLogsLink)&&c(N,"href",A)},d(O){O&&h(e),I&&I.d()}}}function Jl(i){let e,n,t=i[1].map+"",l;return{c(){e=b("span"),n=T("Map: "),l=T(t),this.h()},l(s){e=w(s,"SPAN",{class:!0});var r=v(e);n=L(r,"Map: "),l=L(r,t),r.forEach(h),this.h()},h(){c(e,"class","game-map")},m(s,r){V(s,e,r),d(e,n),d(e,l)},p(s,r){r&2&&t!==(t=s[1].map+"")&&_e(l,t)},d(s){s&&h(e)}}}function ps(i){let e,n;return e=new Fn({props:{toggleHotkeys:i[17],toggleCoordinates:i[19],toggleDiamondAndPoints:i[18]}}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},p:se,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function vs(i){let e,n;return e=new xn({props:{tick:i[2].current}}),{c(){x(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ee(e,t,l),n=!0},p(t,l){const s={};l&4&&(s.tick=t[2].current),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function gs(i){let e,n,t,l,s,r,a,o,f,u,m,_,g,p,S,N,U,P,A,M,I,O,D,R,q,ne,C;e=new vn({}),t=new ms({}),a=new Fi({props:{ticks:i[2].list,tickIndex:i[2].currentIndex,showCoordinates:i[3],showPaths:i[4]}});function $(B){i[23](B)}function y(B){i[24](B)}function j(B){i[25](B)}function X(B){i[26](B)}function W(B){i[27](B)}let z={ticks:i[0],lastLogTickNumber:i[15],nextLogTickNumber:i[14],speed:i[8]};i[9]!==void 0&&(z.playOrStop=i[9]),i[11]!==void 0&&(z.stop=i[11]),i[10]!==void 0&&(z.next=i[10]),i[12]!==void 0&&(z.previous=i[12]),i[13]!==void 0&&(z.showIndividualTurns=i[13]),f=new Hn({props:z}),Me.push(()=>Ze(f,"playOrStop",$)),Me.push(()=>Ze(f,"stop",y)),Me.push(()=>Ze(f,"next",j)),Me.push(()=>Ze(f,"previous",X)),Me.push(()=>Ze(f,"showIndividualTurns",W));let ie=(i[5]||i[7])&&Rl(i),Y=i[1]!==null&&Zl(i);A=new si({props:{tick:i[2].current}}),I=new bn({props:{logs:i[16],ticks:i[2].list,showIndividualTurns:i[13]}}),I.$on("select",i[28]);const ue=[vs,ps],me=[];function ce(B,F){return B[6]?0:1}return D=ce(i),R=me[D]=ue[D](i),{c(){x(e.$$.fragment),n=G(),x(t.$$.fragment),l=G(),s=b("div"),r=b("div"),x(a.$$.fragment),o=G(),x(f.$$.fragment),S=G(),ie&&ie.c(),N=G(),U=b("div"),Y&&Y.c(),P=G(),x(A.$$.fragment),M=G(),x(I.$$.fragment),O=G(),R.c(),this.h()},l(B){le(e.$$.fragment,B),n=H(B),le(t.$$.fragment,B),l=H(B),s=w(B,"DIV",{class:!0});var F=v(s);r=w(F,"DIV",{class:!0});var Ee=v(r);le(a.$$.fragment,Ee),o=H(Ee),le(f.$$.fragment,Ee),S=H(Ee),ie&&ie.l(Ee),Ee.forEach(h),N=H(F),U=w(F,"DIV",{class:!0});var oe=v(U);Y&&Y.l(oe),P=H(oe),le(A.$$.fragment,oe),M=H(oe),le(I.$$.fragment,oe),O=H(oe),R.l(oe),oe.forEach(h),F.forEach(h),this.h()},h(){c(r,"class","game-player svelte-1jyyb31"),c(U,"class","game-info svelte-1jyyb31"),c(s,"class","game-content svelte-1jyyb31")},m(B,F){ee(e,B,F),V(B,n,F),ee(t,B,F),V(B,l,F),V(B,s,F),d(s,r),ee(a,r,null),d(r,o),ee(f,r,null),d(r,S),ie&&ie.m(r,null),d(s,N),d(s,U),Y&&Y.m(U,null),d(U,P),ee(A,U,null),d(U,M),ee(I,U,null),d(U,O),me[D].m(U,null),q=!0,ne||(C=[Se(window,"keypress",i[20]),Se(window,"keydown",i[21])],ne=!0)},p(B,[F]){const Ee={};F&4&&(Ee.ticks=B[2].list),F&4&&(Ee.tickIndex=B[2].currentIndex),F&8&&(Ee.showCoordinates=B[3]),F&16&&(Ee.showPaths=B[4]),a.$set(Ee);const oe={};F&1&&(oe.ticks=B[0]),F&32768&&(oe.lastLogTickNumber=B[15]),F&16384&&(oe.nextLogTickNumber=B[14]),F&256&&(oe.speed=B[8]),!u&&F&512&&(u=!0,oe.playOrStop=B[9],Fe(()=>u=!1)),!m&&F&2048&&(m=!0,oe.stop=B[11],Fe(()=>m=!1)),!_&&F&1024&&(_=!0,oe.next=B[10],Fe(()=>_=!1)),!g&&F&4096&&(g=!0,oe.previous=B[12],Fe(()=>g=!1)),!p&&F&8192&&(p=!0,oe.showIndividualTurns=B[13],Fe(()=>p=!1)),f.$set(oe),B[5]||B[7]?ie?(ie.p(B,F),F&160&&k(ie,1)):(ie=Rl(B),ie.c(),k(ie,1),ie.m(r,null)):ie&&(ae(),E(ie,1,1,()=>{ie=null}),fe()),B[1]!==null?Y?Y.p(B,F):(Y=Zl(B),Y.c(),Y.m(U,P)):Y&&(Y.d(1),Y=null);const pe={};F&4&&(pe.tick=B[2].current),A.$set(pe);const Q={};F&65536&&(Q.logs=B[16]),F&4&&(Q.ticks=B[2].list),F&8192&&(Q.showIndividualTurns=B[13]),I.$set(Q);let de=D;D=ce(B),D===de?me[D].p(B,F):(ae(),E(me[de],1,1,()=>{me[de]=null}),fe(),R=me[D],R?R.p(B,F):(R=me[D]=ue[D](B),R.c()),k(R,1),R.m(U,null))},i(B){q||(k(e.$$.fragment,B),k(t.$$.fragment,B),k(a.$$.fragment,B),k(f.$$.fragment,B),k(ie),k(A.$$.fragment,B),k(I.$$.fragment,B),k(R),q=!0)},o(B){E(e.$$.fragment,B),E(t.$$.fragment,B),E(a.$$.fragment,B),E(f.$$.fragment,B),E(ie),E(A.$$.fragment,B),E(I.$$.fragment,B),E(R),q=!1},d(B){te(e,B),B&&h(n),te(t,B),B&&h(l),B&&h(s),te(a),te(f),ie&&ie.d(),Y&&Y.d(),te(A),te(I),me[D].d(),ne=!1,Je(C)}}}function ks(i,e,n){let t,l,s,r,a=se,o=()=>(a(),a=vt(u,Y=>n(2,r=Y)),u);i.$$.on_destroy.push(()=>a());let{ticks:f=[]}=e,{ticksStore:u=mn(f.map(_n))}=e;o();let{infos:m=null}=e,_=!1,g=!1,p=!1,S=!1,N=!1,U=500,P,A,M,I,O;function D(){n(7,N=!1),n(5,p=!p)}function R(){n(7,N=!1),n(6,S=!S)}function q(){n(5,p=!1),n(7,N=!N)}function ne(){n(3,_=!_)}gt(()=>{P()});function C(Y){switch(Y.key){case"s":R();break;case"h":D();break;case"p":n(4,g=!g);break;case"d":q();break;case"g":ne();break;case"z":u.jump(0);break;case"x":u.jump(r.lastIndex);break;case",":I==null||I();break;case".":A==null||A();break;case" ":P(),Y.preventDefault();break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n(8,U=Math.max(2e3/Math.pow(parseInt(Y.key,10),2),0));break;case"0":n(8,U=0);break}}function $(Y){switch(Y.key){case"ArrowLeft":l&&(M(),u.jump(l-1));break;case"ArrowRight":s&&(M(),u.jump(s-1));break}}function y(Y){P=Y,n(9,P)}function j(Y){M=Y,n(11,M)}function X(Y){A=Y,n(10,A)}function W(Y){I=Y,n(12,I)}function z(Y){O=Y,n(13,O)}const ie=Y=>{M(),u.jump(Y.detail.index)};return i.$$set=Y=>{"ticks"in Y&&n(22,f=Y.ticks),"ticksStore"in Y&&o(n(0,u=Y.ticksStore)),"infos"in Y&&n(1,m=Y.infos)},i.$$.update=()=>{i.$$.dirty&4&&n(16,t=Si(r.list,r.currentIndex)),i.$$.dirty&4&&n(15,l=Pi(r.list,r.currentIndex)),i.$$.dirty&4&&n(14,s=Di(r.list,r.currentIndex))},[u,m,r,_,g,p,S,N,U,P,A,M,I,O,s,l,t,D,q,ne,C,$,f,y,j,X,W,z,ie]}class Es extends ve{constructor(e){super();ge(this,e,ks,gs,ke,{ticks:22,ticksStore:0,infos:1})}}export{Es as B,vn as S,mn as c,_n as e};
